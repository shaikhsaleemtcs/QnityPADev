<apex:page controller="ctrlPAMain" tabstyle="Price_Approval__tab" sidebar="false" showHeader="true" id="currentPage"  action="{!onLoadCall}" cache="true">
    <apex:includeScript value="{!URLFOR($Resource.DataTable, 'DataTables-1.9.4/media/js/jquery.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.DataTable, 'DataTables-1.9.4/media/js/jquery.dataTables.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.DataTable, 'DataTables-1.9.4/media/js/jquery.dataTables.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.DataTable, 'DataTables-1.9.4/media/css/jquery.dataTables.css')}" />
    <c:loadingComponent />
    <apex:pageMessages escape="false" id="errorMessage"/>
    <!-- Version 1.1 START  --> 
    <!-- Done UI changes - Prachi 15th feb -->
    <!-- version 1.1 END -->
    <!-- version 1.2 Changed the variable paProjectPrice  -->
    <!-- version 1.3 Added conditions for Edit Header and Add prices buttons -->
    <!-- version 1.4 added render condition on Add Material / on 25 FEb by anand  -->
    <!-- version 1.5 added render condition on Recall for defect 407 / on 26 FEb by Utkarsh  -->
    <!-- version 1.6 added render conditions on showSelectButtons , showActionFlag in relatedList for issue 369 by Prachi -->
    <!--    Ver.            Developer               Changes                                                         Dependencies    -->
    <!--    1.7             Priyanka        Changed table component to 'PARequestItemRelatedList'                                   -->
    <!--                                    from PARelatedList                                                      None            -->
    <!--    1.8             Prachi          Modified rendered conditions for Payment incoterms in case of FOC (Spot Type)   None -->
    <!--    1.9             Priyanka        Removed attributes in Related List                                              None -->
    <!--    2.0             Priyanka            Change in architecture                                                      None    -->
    <!--    2.1             Priyanka            Change render condition for Recall                                          None    -->
    <!--    2.2             Prachi              Removed Rerender condition for upload attachment                            None    -->
    <!--    2.3             Prachi              UI                                                                          None    -->
    <!--    2.4             Bala            Added onBehalf Of for Project Section       None -->
    <!--    2.5             Prachi/Utkarsh      changed the rendered condition in case the id is passed in url              ctrlPAMain, PARequestItem -->
    <!--    2.6             Prachi           removed &nbsp; in buttons section for UI;issue 118                                     None     -->
    <!--    2.7             Brundha         added rendered part for abandon button      None        -->
    <!--    2.8             Prachi          Approval History UI issue                                                       None    -->
    <!--    2.9             Utkarsh         Changed the Reassign Popup                                          PAUserPopulationCOmponent -->
    <!--    3.0             Brundha             rendered notes and attachment based on Attachments_on_Customer_Prices__c  and Request Type PARequest  -->
    <!--    3.1             Priyanka            Added attribute in RelatedList for rendering Standarized Rate
- APAC ROLLOUT                                                  PARequest           -->
    <!--    3.2             Prachi              Task Assigned to(displaying the username) for project-          
APAC ROLLOUT                                                    None                -->
    <!--    3.3             Prachi              Adding Edit Header button                                       None                -->
    <!--    3.4             Vinoth              Adding Sold to link to open the customer detains in new page (APAC ROLLOUT1)    None-->
    <!--      3.5                        Utkarsh                           Added condition at line 808 for Pending when the reqyest is abandoned -->
    <!--    3.6           Bisnupriya          Removed showStandardizedRate from the component PARequestItemRelatedList (APAC ROLLOUT2)    None-->
    <!-- PP20130715        Priyanka Pillala     10 Jul 2013                       Adding Request Class - APAC ROLLOUT2                                  None            -->
    <!-- BR20130626        Brundha Rajkumar     26 Jun 2013                       Adding pricing Exception - APAC ROLLOUT2                              None            -->
    <!-- BR20130819       Brundha Rajkumar     19 Aug 2013                       Moving status sectionitem below to pricing task type(pricing task) - APAC ROLLOUT2                            None            -->
    <!-- NS20130821     Neeharika           21 Aug 2013             Adding the Landing Cost Functionality -->
    <!-- VR20131023     Vinoth              23 Oct 2013             Modified the render condition for PCL - DTT Rollout issue -->
    <!-- VR20131111     Vinoth              11 Nov 2013             DTT Rollout Issue - Changing the render condition to include spot only -->
    <!-- VR20140107     Vinoth              07 Jan 2014             DTT Rollout Issue - Added null condition check in rendered             -->
    <!-- SP20140131     Shiva               31 Jan 2014             Modified the J-query for hiding the standard "Submit for Approval" button  -->
    <!-- VR20140221     Vinoth              21 Feb 2014             Global Rollout - Uncommenting the ReAssign Button      -->
    <!-- PP20140224     Priyanka Pillala    24 Feb 2014             Show Apply Changes section for Customer Prices - CAPITAL PROJECT-->
    <!-- BB20140304     Bisnupriya          04 Mar 2014             Added submit button below attachments for Pricing Task and Project Pricing - CAPITAL PROJECT-->
    <!--                Tarun Jain          24 Mar 2014             Added script to generate HTML Table with enhanced features -->
    <!-- BB20140321     Bisnupriya          21 Mar 2014             Added Added logic to populate Approvers in case of Auto Approval - CAPITAL PROJECT-->
    <!-- MS20140402     Mohit Sinha         02 Apr 2014             Added images and jquery to enable mouseover scrolling for Pricing Records -->
    <!-- TJ20140505     Tarun               05 May 2014             Added the landing page link -->
    <!-- BB20140508     Bisnupriya          08 May 2014             Added Customer Order Block section Pricing Request Header - CAPITAL PROJECT-->
    <!-- TJ20140509     Tarun               09 May 2014             Added Navigation Flow Text   -->
    <!-- PP20140512     Priyanka Pillala    12 May 2014             On click of 'Add Prices', navigate to 'Current Prices' screen -->
    <!-- PP20140514     Priyanka Pillala    14 May 2014             Added Net Pricing and Add Materials button -->
    <!-- AV20140515     Abhijeet Vaishnab   15 May 2014             Added Sales volume button -->
    <!-- HL20140904     Hema Latha           04 Sep 2014             Added Refresh button -->
    <!-- IS ID-00065529 Sumit Gupta         Mar 15 2016             Rendered Valid From and Valid to Date line 1150 -->
    <!-- NS20160425     Nadeem Shaik        Apr 25 2016             Added request reason to Rebate request types - IS ID-00068874 -->
    <!-- IS ID-00076073 Mansi Gupta         Nov 07 2016             Hide Approve button for BU Admins of DPP Polymers EMEA -->
    <!-- IS ID-00075712 Mansi Gupta         Dec 21 2016             Show message if NPC status changes between submit and continue click -->
    <!-- CC20190926     Calment Cleo        Sep 26 2019             Attach Document and Delete Document button enabled for BU Admins -->
    <!-- PG20191211     Piyush Gupta        Dec 11 2019             Adding Customer Segmentation field. -->
    <!-- SK20200504     Sairam Kumar        May 04 2020             Updated below section to show Customer Segmentation Field and value for all Pricing Request Type: IS SC-00093664. -->  
    <!-- SK20200512     Sairam Kumar        May 12 2020             Updated Request Details section to show Request Reason Field and value for all Pricing Request Type: IS ID-00086258 & IS ID-00086259. --> 
   <!-- AS20201026     Arrola Sireesha     Updated "Actual Approver" name to "Escalated To"<IS TI-00090859> -->  
   <!-- SL20220614     Satyandra Lodhi     Updated Ajax version from 15.0 to 55.0 and page version from 49.0 to 55.0 to support salesforce release <IS TI-00094390> -->  
   <!-- SS20230501     Shantanu Sharma     Jun 09 2023              Added rebate request type 'Rebate Payout Product Shipment' -->
    <style>
        .customerLink{font-size:15px;height:20px;margin-bottom:1px;padding:5px;border:solid 1px;border-color:#6E96B2; background-color:#E5F3FC;font-weight:bold;text-align:left;}
        .navFlow{font-size:13px;font-style:oblique;margin-bottom:3px;}
        .priceReq  .pbSubheader{margin-bottom:0px;}
        .priceReq  .detailList{border:1px solid #E2E3E4;}
        <!--.priceReq  .detailList .dataCol{color:#000000;}-->
        .priceReq  .detailList tr th{border-bottom:none;}
        .priceReq  .detailList tr td{border-bottom:none;}
        <!--.priceReq  .detailList .data2Col {border:none;padding-left:0px;}-->
        .bPageBlock .detailList .list tr th{color:black;}
        body .pbBody table.list tr td{border-bottom: none;}
        <!-- body .pbBody table.list tr th{color:white;background-color:#63A4C5;}-->
        .pricesSection table.list tr:first-child th{color:white;background-color:#63A4C5;}
        .pricesSection table.list tr:nth-child(2) th{color:black;background-color:#f8f8f8;border:1px solid #E2E3E4; }
        
        .bPageBlock .detailList .list1 tr th{color:black;}
        body .pbBody table.list1 tr td{border-bottom: none;}       
        body .pbBody table.list1{border:1px solid #e0e3e5;background-color:#fff;width: 2200px;}
        .pricesSection table.list1 tr:first-child th{color:white;background-color:#63A4C5;}
        .pricesSection table.list1 tr:nth-child(2) th{color:black;background-color:#f8f8f8;border:1px solid #E2E3E4;}
        
        
        .bPageBlock .detailList #listUser tr th{color:black;}
        body .pbBody table#listUser tr td{border-bottom: none;}        
        body .pbBody table#listUser{border:1px solid #e0e3e5;background-color:#fff;width: 100%;}
        body .pbBody table#listUser tr:first-child th{color:black;background-color:#f8f8f8;border:1px solid #E2E3E4;font-weight:bolder;}
        
        .priceReq .priceTask .detailList{border-bottom:none;}
        .priceReq .csr .detailList{border-top:none;}
        
        <!-- VR20130830 RollOut2 Issue fix -->
        .priceReq .priceReq1 .detailList{border-bottom:none;}
        .priceReq .pe .detailList{border-top:none;}
        .priceReq {width:99.5%;}
        .priceReq .priceReq1 {width:99.5%;}
        
        #multiApprover a.btn{width:70px;float:left;}
        #reassignApprover a.btn{width:60px;float:left;}
        
        #buttons a.btn{
        width       : auto;
        padding: 2px 10px 2px 10px;
        float:left;
        min-width: 80px;
        }
        #buttons #buttonsProject a.btn{width:130px;float:left;}
        #buttons #buttonsFlrRefView a.btn{width:100px;float:left;}
        #buttons #buttonsNPC a.btn{width:100px;float:left;}
        
        #container{
        width:1280px;
        overflow-x:hidden;
        }
        
        .pricesSection .panner {
        display: inline-block;
        position:fixed;
        width:25px;
        height:25px;
        top:60%;
        opacity:0.5;
        }
        .active {
        color:red;
        }
        #panLeft {
        left:10px;
        }
        #panRight {
        right:10px;
        }
        
    </style>
    <script src="/soap/ajax/55.0/connection.js" type="text/javascript"/>
    <script src="/soap/ajax/55.0/apex.js" type="text/javascript"/>
        <script>
        $j = jQuery.noConflict();
    // Added a check for a specific custom object
    $j(document).ready(function() {    
        $j("input[name='piSubmit']").hide();
    });
    </script>
    <script type='text/javascript'>
    
    function setFocusOnLoad() {}
    
    
    function confirmDelete(Id,Str)
    {
        var con = confirm("Are you sure you want to Delete?");
        if (con ==true)
        {
            confirmDelete(Id,Str);
        }
        else
        {}       
    }
    function confirmDeleteSelected(Str)
    {
        var con = confirm("Are you sure you want to Delete?");
        if (con ==true)
        {
            delSelectedConfirmation(Str);
        }
        else
        {}       
    }
    function confirmSubmit()
    {
        var con = confirm("Are you sure you want to Submit?");
        return con;
    }
    function confirmQuit()
    {
        var con = confirm('{!$Label.Quit_Request_Confirmation}');
        if (con == true) 
        {
            quitPricingRequest();
        }
        return false;   
    }
    
    function confirmAbandon()
    {
        var con = confirm('{!$Label.Abandon_Request_Confirmation}');
        if (con == true)
        {
            abandonPricingRequest();
        }
        return false;   
    }
    function confirmRecall(reqId)
    {
        //console.log('reqId '+reqId);
        //alert('{!$User.Id}');
        var con = confirm('{!$Label.Recall_Request_Confirmation}');
        if(con){
            //if(submittedBy != '{!$User.Id}'){
            sforce.connection.login('spec.specpa@dupont.com.esu', '{!service.PAServiceState.currentRequest.approvalWF.adminPwd}');
            
            sforce.apex.execute("PAReassign","recallRequest",{requestId:'{!service.PAServiceState.currentrequest.pricingRequest.Id}',comments:''});
            //}
        }
        return con; 
    }
    
    function confirmCancelTask()
    {
        var con = confirm('{!$Label.Cancel_Task_for_CSR_Confirmation}');
        return con;     
    }
    
    var bool='{!prTable}';
    var totalRows= (200/{!service.PAServicestate.currentRequestItem.noOfTables});
    var totalRowsInt = parseInt(totalRows);
    
    var j$ = jQuery.noConflict();                                 //<TJ20140401> - added javascript to generate HTML Table with additional functionalities
    j$(document).ready(function() {
        loadDatatables();
    });
    
    
    
    function loadDatatables()
    {
        <!-- SP20140131 START -->
            j$('input[name="piSubmit"]').css("display","none");
        j$('input[name="piRemove"]').css("display","none");     
        <!-- SP20140131 END -->
            
            var tab=j$('.list1').dataTable({
                "aaSorting":[],
                "bStateSave":true,
                "bLengthChange":false,
                "iDisplayLength" :totalRowsInt,
                "aoColumnDefs" : [{"bSortable": false,"bSearchable": false, "aTargets":[0]},{"bSortable": false,"aTargets":[1]}],
                sPaginationType: "full_numbers",
                sPlaceHolder : "foot:before",
                "fnStateSave": function (oSettings, oData) {
                    localStorage.setItem( 'DataTablesPr', JSON.stringify(oData) );
                },
                "fnStateLoad": function (oSettings) {
                    if(bool==='true'){
                        return JSON.parse( localStorage.getItem('DataTablesPr') );
                    }
                },
                "fnStateLoadParams": function(oSettings,oData){
                    if(bool==='false'){
                        oData.oSearch.sSearch = "";
                    }
                }        
            });                     
        
        var tab1=j$('#listUser').dataTable({
            "bLengthChange":false,
            "bPaginate":false,
            sPlaceHolder : "foot:before"
        }); 
        
        j$('.list1'+'_filter').after('<br /><br />');
        j$('.list1').after('<br />');
        
        j$('.list'+'_filter').after('<br /><br />');
        j$('.list').after('<br />');
        
        j$("div[id~=appProcess] a.actionLink").css("display","none");
        j$("div[id~=appProcess] td.actionColumn:contains(|)").text(" ");
        j$('input[title="Recall Approval Request"]').css("display","none");     
        j$('input[title="Submit for Approval"]').css("display","none");
        
        <!-- SP20140131 START -->
            j$('input[name="piSubmit"]').css("display","none");
        j$('input[name="piRemove"]').css("display","none");     
        <!-- SP20140131 END -->
            
            
            j$("div[id~=appProcess] .pShowMore a:first").css("display","none");
        var secDisplay = j$("div[id~=appProcess] .pShowMore a:last");
        j$("div[id~=appProcess] .pShowMore:contains(|)").html(secDisplay);
        j$("div[id~=appProcess] a").attr('target', '_blank');
        
        var scrollHandle = 0,
            scrollStep = 15,
            parent = j$("#container");
        
        //Start the scrolling process
        j$(".panner").on("mouseenter", function () {
            var data = j$(this).data('scrollModifier'),
                direction = parseInt(data, 10);
            
            j$(this).addClass('active');
            
            startScrolling(direction, scrollStep);
        });
        
        //Kill the scrolling
        j$(".panner").on("mouseleave", function () {
            stopScrolling();
            j$(this).removeClass('active');
        });
        
        //Actual handling of the scrolling
        function startScrolling(modifier, step) {
            if (scrollHandle === 0) {
                scrollHandle = setInterval(function () {
                    var newOffset = parent.scrollLeft() + (scrollStep * modifier);
                    
                    parent.scrollLeft(newOffset);
                }, 10);
            }
        }
        
        function stopScrolling() {
            clearInterval(scrollHandle);
            scrollHandle = 0;
        }
        
    }
    function reassignJS(reqId, currentApproverID, newApproverId)
    {
        //sforce.debug.trace=true;
        sforce.connection.login('spec.specpa@dupont.com.esu', '{!service.PAServiceState.currentRequest.approvalWF.adminPwd}');
        
        
        console.log('called reassign');
        console.log('Current request Id:'+reqId);
        console.log('currentApproverID:'+currentApproverID);
        console.log('newApproverId'+newApproverId);
        
        sforce.apex.execute("PAReassign","reAssign",{requestId:reqId,currentAssignedUserId:currentApproverID,reassignUserId:newApproverId});
        console.log('Reassign Done!!');
        refreshPage();
    }
    
    
    /*<PA20150113> added the js function for send Message button*/
    /*<GT20150114>*/
    
    function getBrowser(){
        var userAgent = navigator.userAgent.toLowerCase();
        j$.browser.chrome = /chrome/.test(userAgent);
        j$.browser.safari= /webkit/.test(userAgent);
        j$.browser.opera=/opera/.test(userAgent);
        j$.browser.msie=/msie/.test( userAgent ) && !/opera/.test( userAgent );
        j$.browser.mozilla= /mozilla/.test( userAgent ) && !/(compatible|webkit)/.test( userAgent ) || /firefox/.test(userAgent);
        
        if(j$.browser.chrome) return "chrome";
        if(j$.browser.mozilla) return "mozilla";
        if(j$.browser.opera) return "opera";
        if(j$.browser.safari) return "safari";
        if(j$.browser.msie) return "ie";
        
    }
    
    function mailToOutlook(){   
        
        if("{!service.PAServiceState.currentRequest.pricingRequest.Customer_Specific__c}" == "true"){    
            var body = "%0D%0A %0D%0A Link: {!service.PAServiceState.currentRequest.baseURL}"+"/{!service.PAServiceState.currentRequest.pricingRequest.Id} %0D%0A Sold to: {!service.PAServiceState.currentRequest.pricingRequest.Sold_To__c}";
        }else{
            var body = "%0D%0A %0D%0A Link: {!service.PAServiceState.currentRequest.baseURL}"+"/{!service.PAServiceState.currentRequest.pricingRequest.Id} %0D%0A";
        }
        var to = "{!service.PAServiceState.currentRequest.allApprovers}"; 
        var cc = "{!service.PAServiceState.currentRequest.pricingRequest.Owner.Email}";
        var subject = "Information update for SFDC PA request {!service.PAServiceState.currentRequest.pricingRequest.Request_Name__c} - {!service.PAServiceState.currentRequest.pricingRequest.Name}";
        
        //window.location.href = "mailto:"+to+"?cc="+cc+"&body="+body+"&subject="+subject;    
        var mailto_link = "mailto:"+to+"?cc="+cc+"&body="+body+"&subject="+subject;
        //console.log(mailto_link);
        if(getBrowser()=='mozilla'){
            setTimeout(function(){document.location.href = mailto_link;},500);
        }
        else if(getBrowser()=='ie'){
            window.location.href=mailto_link;
        }
            else if(getBrowser()=='opera'){
                setTimeout(function(){document.location.href = mailto_link;},500);
            }           
                else if (getBrowser()=='safari'){
                    setTimeout(function(){document.location.href = mailto_link;},500);
                }
                    else if(getBrowser()=='chrome'){
                        setTimeout(function(){document.location.href = mailto_link;},500);
                    }
    } 
    
    </script>
    
    <apex:actionStatus id="stat">
        <apex:facet name="start">
            <div class="spinnerMask" id="spinnerMask">
                <div class="spinnerCt"><img
                                            src="/img/analytics/reportbuilder/icons/spinner32.gif"
                                            alt="Loading..." width="32" height="32" align="center"
                                            class="spinner" title="Loading..." />
                    <div class="loadingIndicator">Loading...</div>
                </div>
                <div class="mask"></div>
            </div>
        </apex:facet>
    </apex:actionStatus>
    
    <apex:form id="formId">
        <apex:actionFunction name="refreshPage" action="{!businessComponentAction}" status="stat" reRender="formId">
            <apex:param name="desiredAction" value="reassign" assignTo="{!businessaction}" />
            <apex:param name="newPageLabel" value="PAPricingRequest" assignTo="{!newPageLabel}" />
        </apex:actionFunction> 
        <!-- <TJ20140505> Added Landing Page Link -->
        <div align="left" class="navFlow">
            <apex:commandLink id="link0" value="Landing Page" action="{!businessComponentAction}" target="_self" style="color:blue;">
                <apex:param name="desiredAction" value="landingpage" assignTo="{!businessaction}" />
                <apex:param name="newPageLabel" value="PAHome" assignTo="{!newPageLabel}" />
            </apex:commandLink>
            <!-- <TJ20140509> Added Navigation Flow Text-->
            <apex:outputText value="{!if(NOT(ISNULL(navigationText)),'>>','')} "/>
            <apex:outputText value="{!navigationText}"/>
            <apex:outputText value="{!IF(pageName!=null,'>>  '+$Label.Price_Request,$Label.Price_Request)}"/>
        </div>
        <!--        <TJ20140417>   Changed Page Label-->        
        <div class="customerLink">
            {!$Label.Price_Request}
        </div>
        <!--        <TJ20140513> Help Link-->    
        <apex:commandLink value="Help" action="{!helpLink}" style="float:right;" target="_blank">
            <apex:param name="Help" value="Price Request" assignTo="{!label}"/>
        </apex:commandLink>
        
        
        
        
        
        <apex:pageBlock >
            
            
            <div class="priceReq">
                <apex:pageBlockSection title="{!IF(service.paServiceState.ogitems.isEndUserRebate,'Sold to Information','Customer Information')}"
                                       rendered="{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c == 'Customer Specific'}" />
                <apex:pageBlockSection title="Sales Area Detail"
                                       rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c  == 'Massive' || service.PAServicestate.currentrequest.pricingRequest.Request_Type__c  == 'Non Customer Specific'}" />
                
                <!-- IM20150123 Added as part of Rebate Request -->
                <!--   <apex:pageBlockSection rendered="{!service.paServiceState.ogitems.isEndUserRebate}">  -->
                <!-- <TJ20140515> -->
                <!--     <apex:pageblocksectionitem >
<apex:outputlabel value="Business"/>
<apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.BU__c}"/>
</apex:pageblocksectionitem>
<apex:pageBlockSectionItem rendered="{!IF(OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Import') && service.PAServicestate.ogItems.salesAdminPermissionSetFlag || service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive',true,false)}">
<apex:outputText value="On Behalf Of"/>
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.On_Behalf_Of__r.Name}" />
</apex:pageBlockSectionItem> -->
                
                <!--    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
<apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Sold To Code","Sold to Code")}"/> -->
                
                <!-- Ver 3.4 VR 2013-05-10 APAC Rollout1-Sold to Link to open Customer details in new window -->
                <!--  <apex:outputlink value="#" onclick="window.open('/{!service.PAServicestate.currentRequestItem.soldToId}?isdtp=lt','_blank','width=810,height=310,toolbar=0,status=1,scrollbars=1,resizable=yes',!1);">{!service.PAServicestate.Currentrequest.pricingRequest.SoldTo_Code__c}</apex:outputlink>
</apex:pageBlockSectionItem>
<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
<apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Sold To","Sold to")}"/>
<apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.Sold_To__c}" />
</apex:pageBlockSectionItem> -->
                
                <!--  <apex:pageBlockSectionItem >
Sales Area
<apex:outputText escape="false"  value="{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org_code__c}-{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org__c}
<br>{!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel_Code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel__c}<br>{!service.PAServicestate.currentrequest.pricingRequest.Division_code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Division__c}"/>  


</apex:pageBlockSectionItem>
<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c == 'Customer Specific'}">
Location
<apex:outputText escape="false"
value="{!service.PAServicestate.currentrequest.pricingRequest.Street__c + IF(service.PAServicestate.currentRequest.pricingRequest.Street__c !=null && service.PAServicestate.currentRequest.pricingRequest.Street__c !='','<br/>','')+ service.PAServicestate.currentRequest.pricingRequest.City__c + IF(service.PAServicestate.currentrequest.pricingRequest.City__c !=null && service.PAServicestate.currentrequest.pricingRequest.City__c !='','<br/>','') +
service.PAServicestate.currentrequest.pricingRequest.State_Province__c + IF(service.PAServicestate.currentrequest.pricingRequest.State_Province__c !=null&&service.PAServicestate.currentrequest.pricingRequest.State_Province__c !='','<br/>','') +  
service.PAServicestate.currentrequest.pricingRequest.Country__c +IF(service.PAServicestate.currentrequest.pricingRequest.Country__c !=null && service.PAServicestate.currentrequest.pricingRequest.Country__c !='','<br/>','')+ service.PAServicestate.currentrequest.pricingRequest.Zip_PostalCode__c}" />

</apex:pageBlockSectionItem> -->
                <!-- </apex:pageBlockSection>  -->
                
                <!-- IM20150123 END -->
                
                
                <!--  <apex:pageBlockSection rendered="{!!service.paServiceState.ogitems.isEndUserRebate}">  -->
                <!-- <TJ20140515> -->
                <!--   <apex:pageblocksectionitem >
<apex:outputlabel value="Business"/>
<apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.BU__c}"/>
</apex:pageblocksectionitem>
<apex:pageBlockSectionItem rendered="{!IF(OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Import') && service.PAServicestate.ogItems.salesAdminPermissionSetFlag || service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive',true,false)}">
<apex:outputText value="On Behalf Of"/>
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.On_Behalf_Of__r.Name}" />
</apex:pageBlockSectionItem>


<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
<apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Customer Code","Sold to Code")}"/> -->
                
                <!-- Ver 3.4 VR 2013-05-10 APAC Rollout1-Sold to Link to open Customer details in new window -->
                <!--   <apex:outputlink value="#" onclick="window.open('/{!service.PAServicestate.currentRequestItem.soldToId}?isdtp=lt','_blank','width=810,height=310,toolbar=0,status=1,scrollbars=1,resizable=yes',!1);">{!service.PAServicestate.Currentrequest.pricingRequest.SoldTo_Code__c}</apex:outputlink>
</apex:pageBlockSectionItem>
<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
<apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Customer","Sold to")}"/>
<apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.Sold_To__c}" />
</apex:pageBlockSectionItem>




<apex:pageBlockSectionItem >
Sales Area
<apex:outputText escape="false"  value="{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org_code__c}-{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org__c}
<br>{!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel_Code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel__c}<br>{!service.PAServicestate.currentrequest.pricingRequest.Division_code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Division__c}"/>  


</apex:pageBlockSectionItem>
<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c == 'Customer Specific'}">
Location
<apex:outputText escape="false"
value="{!service.PAServicestate.currentrequest.pricingRequest.Street__c + IF(service.PAServicestate.currentRequest.pricingRequest.Street__c !=null && service.PAServicestate.currentRequest.pricingRequest.Street__c !='','<br/>','')+ service.PAServicestate.currentRequest.pricingRequest.City__c + IF(service.PAServicestate.currentrequest.pricingRequest.City__c !=null && service.PAServicestate.currentrequest.pricingRequest.City__c !='','<br/>','') +
service.PAServicestate.currentrequest.pricingRequest.State_Province__c + IF(service.PAServicestate.currentrequest.pricingRequest.State_Province__c !=null&&service.PAServicestate.currentrequest.pricingRequest.State_Province__c !='','<br/>','') +  
service.PAServicestate.currentrequest.pricingRequest.Country__c +IF(service.PAServicestate.currentrequest.pricingRequest.Country__c !=null && service.PAServicestate.currentrequest.pricingRequest.Country__c !='','<br/>','')+ service.PAServicestate.currentrequest.pricingRequest.Zip_PostalCode__c}" />




</apex:pageBlockSectionItem> -->
                <!-- VR20131111 DTT Rollout Issue - Changing the render condition to include spot only -->
                <!-- <apex:pageBlockSectionItem rendered="{!AND(OR(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent') , AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Spot Price')), service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c != 'Project Pricing',!service.paServiceState.ogitems.isEndUserRebate)}">
Payment Terms
<apex:outputPanel >
<apex:outputText value="{!service.PAServicestate.currentRequest.customer.paERPcustomer.Terms_of_Payment_Code__c} - {!service.PAServicestate.currentRequest.customer.paERPcustomer.Terms_of_Payment__c}"
rendered="{!NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task')}" />
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment_Code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c}"
rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c <> 'Other'}"/>
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Non_Standard_Terms_Of_Payment__c}"
rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c == 'Other'}" />
</apex:outputPanel>
</apex:pageBlockSectionItem>  -->
                <!-- VR20131111 DTT Rollout Issue - Changing the render condition to include spot only -->
                <!-- <apex:pageBlockSectionItem rendered="{!AND(OR(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent') , AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Spot Price')), service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c != 'Project Pricing',!service.paServiceState.ogitems.isEndUserRebate)}">
Incoterms
<apex:outputPanel >
<apex:outputText value="{!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_1_Code__c}({!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_1__c})-{!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_2__c}"
rendered="{!NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task')}" />
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Incoterms_Code__c}({!service.PAServicestate.currentrequest.pricingRequest.Incoterm__c})"
rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Incoterm__c <> 'Other'}"/>
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Non_Standard_Incoterm__c}"
rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Incoterm__c == 'Other'}" />
</apex:outputPanel>
</apex:pageBlockSectionItem>  -->
                
                <!-- BB20140508 Capital Project Added Customer Order Block section  START-->
                <!--    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block_Code__c != null}">
Customer Order Block
<apex:outputText escape="false"  value="{!service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block_Code__c}-{!service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block__c}"/>  
</apex:pageBlockSectionItem>
<br/> -->
                <!-- BB20140508 END -->
                <!--    </apex:pageBlockSection>  -->
                <!-- New Re Factoring Code Start-->
                
                <apex:pageBlockSection rendered="{!OR(service.paServiceState.ogitems.isEndUserRebate,!service.paServiceState.ogitems.isEndUserRebate)}">
                    <apex:pageblocksectionitem >
                        <apex:outputlabel value="Business"/>
                        <apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.BU__c}"/>
                    </apex:pageblocksectionitem>
                    <apex:pageBlockSectionItem rendered="{!IF(OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Import') && service.PAServicestate.ogItems.salesAdminPermissionSetFlag || service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive',true,false)}">
                        <apex:outputText value="On Behalf Of"/>
                        <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.On_Behalf_Of__r.Name}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
                        <apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Sold To Code","Sold to Code")}"/>
                        
                        <!-- Ver 3.4 VR 2013-05-10 APAC Rollout1-Sold to Link to open Customer details in new window -->
                        <apex:outputlink value="#" onclick="window.open('/{!service.PAServicestate.currentRequestItem.soldToId}?isdtp=lt','_blank','width=810,height=310,toolbar=0,status=1,scrollbars=1,resizable=yes',!1);">{!service.PAServicestate.Currentrequest.pricingRequest.SoldTo_Code__c}</apex:outputlink>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific'}" >
                        <apex:outputText value="{!IF(service.paServiceState.ogitems.isEndUserRebate,"Sold To","Sold to")}"/>
                        <apex:outputText value="{!service.PAServicestate.Currentrequest.pricingRequest.Sold_To__c}" />
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        Sales Area
                        <apex:outputText escape="false"  value="{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org_code__c}-{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org__c}
                                                                <br>{!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel_Code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel__c}<br>{!service.PAServicestate.currentrequest.pricingRequest.Division_code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Division__c}"/>  
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c == 'Customer Specific'}">
                        Location
                        <apex:outputText escape="false"
                                         value="{!service.PAServicestate.currentrequest.pricingRequest.Street__c + IF(service.PAServicestate.currentRequest.pricingRequest.Street__c !=null && service.PAServicestate.currentRequest.pricingRequest.Street__c !='','<br/>','')+ service.PAServicestate.currentRequest.pricingRequest.City__c + IF(service.PAServicestate.currentrequest.pricingRequest.City__c !=null && service.PAServicestate.currentrequest.pricingRequest.City__c !='','<br/>','') +
                                                service.PAServicestate.currentrequest.pricingRequest.State_Province__c + IF(service.PAServicestate.currentrequest.pricingRequest.State_Province__c !=null&&service.PAServicestate.currentrequest.pricingRequest.State_Province__c !='','<br/>','') +  
                                                service.PAServicestate.currentrequest.pricingRequest.Country__c +IF(service.PAServicestate.currentrequest.pricingRequest.Country__c !=null && service.PAServicestate.currentrequest.pricingRequest.Country__c !='','<br/>','')+ service.PAServicestate.currentrequest.pricingRequest.Zip_PostalCode__c}" />
                    </apex:pageBlockSectionItem>
                    
                    
                    
                    
                    <apex:pageBlockSectionItem rendered="{!AND(OR(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent') , AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Spot Price')), service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c != 'Project Pricing',!service.paServiceState.ogitems.isEndUserRebate)}">
                        Payment Terms
                        <apex:outputPanel >
                            <apex:outputText value="{!service.PAServicestate.currentRequest.customer.paERPcustomer.Terms_of_Payment_Code__c} - {!service.PAServicestate.currentRequest.customer.paERPcustomer.Terms_of_Payment__c}"
                                             rendered="{!NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task')}" />
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment_Code__c} - {!service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c}"
                                             rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c <> 'Other'}"/>
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Non_Standard_Terms_Of_Payment__c}"
                                             rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Terms_Of_Payment__c == 'Other'}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    
                    
                    
                    
                    <!-- VR20131111 DTT Rollout Issue - Changing the render condition to include spot only -->
                    <apex:pageBlockSectionItem rendered="{!AND(OR(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent') , AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Spot Price')), service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c != 'Project Pricing',!service.paServiceState.ogitems.isEndUserRebate)}">
                        Incoterms
                        <apex:outputPanel >
                            <apex:outputText value="{!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_1_Code__c}({!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_1__c})-{!service.PAServicestate.currentRequest.customer.paERPcustomer.Incoterms_2__c}"
                                             rendered="{!NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task')}" />
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Incoterms_Code__c}({!service.PAServicestate.currentrequest.pricingRequest.Incoterm__c})"
                                             rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Incoterm__c <> 'Other'}"/>
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Non_Standard_Incoterm__c}"
                                             rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.Incoterm__c == 'Other'}" />
                        </apex:outputPanel>
                        
                    </apex:pageBlockSectionItem>
                    <!--    Added by Piyush PG20191211 - To add Customer group 4 Code   --> 
                    <!-- SK20200504 Start-->
                    
                    <apex:pageBlockSectionItem rendered="{!AND(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',!service.paServiceState.ogitems.isEndUserRebate),contains(service.PAServicestate.Currentrequest.pricingRequest.BU__c,'DPT'))}"> 
                          Customer Segmentation
                       <apex:outputPanel >
                            <apex:outputText value="{!service.PAServicestate.currentRequest.customer.paERPcustomer.Customer_Group_4_Code__c} - {!service.PAServicestate.currentRequest.customer.paERPcustomer.Customer_Group_4__c}"/>
                        </apex:outputPanel>
                       </apex:pageBlockSectionItem> 
                    <!-- SK20200504 End-->
                       <apex:pageBlockSectionItem rendered="{!AND(service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block_Code__c != null,!service.paServiceState.ogitems.isEndUserRebate)}">
                        Customer Order Block
                        <apex:outputText escape="false"  value="{!service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block_Code__c}-{!service.PAServicestate.currentrequest.customer.paERPcustomer.Customer_Order_Block__c}"/>  
                    </apex:pageBlockSectionItem>
                    <br/>       
                </apex:pageBlockSection> 
                <!-- New Re Factoring Code End-->
                
                
                <apex:pageBlockSection title="End User Details" rendered="{!service.paServiceState.ogitems.isEndUserRebate}" >
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="End User Code" />
                        <apex:outputText value="{!service.PAServicestate.currentRequest.pricingRequest.End_User_Code__c }" />
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="End User Name" />
                        <apex:outputText value="{!service.PAServicestate.currentRequest.pricingRequest.End_User__c }" />
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="End User Country" />
                        <apex:outputText value="{!service.PAServicestate.currentRequest.pricingRequest.End_User_Country__c }" />
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </div>
            <div class="priceReq">
                <div class="priceReq1">
                    
                    <apex:pageBlockSection title="Request Details" id="NetPricingStatus"
                                           rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c != 'Project Pricing'}">
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}" >
                            <apex:outputText value="Requested By" />
                            <apex:outputText value="{!IF(OR(service.paServiceState.ogItems.isBUAdmin, service.paServiceState.ogItems.salesAdminPermissionSetFlag),service.paServiceState.ogItems.userName,service.paServiceState.ogItems.loggedInUserName)}" />  
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}" >
                            <apex:outputText value="Requested Date" />
                            <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                <apex:param value="{!IF(NOT(service.PAServicestate.currentRequest.PricingRequest.Id == null),service.PAServicestate.currentRequest.PricingRequest.CreatedDate,Today())}" />  
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            Request Id
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Name}" />
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing task'}">
                            <apex:outputText />
                            <apex:outputText />
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem >
                            Request Name
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Name__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}">
                            Request Status
                            <apex:outputText value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Request_Approval_Status__c}" />
                        </apex:pageBlockSectionItem>
                    <!-- SK20200512 Start-->
                           <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),service.paServiceState.ogitems.isEndUserRebate)}">
                    Request Reason
                    <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                        </apex:pageBlockSectionItem>
                    <!-- SK20200512 End-->
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}">
                            <apex:outputText value="Reason Detail" />
                            <apex:outputPanel >
                                <div id="divDefDisc">
                                    <apex:outputField value="{!service.PAServicestate.currentRequest.PricingRequest.Reason_Detail__c}" style="width:348px;"/>
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}"></apex:pageBlockSectionItem>
                        
                        <!--         <apex:pageBlockSectionItem rendered="{!OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive') && service.PAServicestate.ogItems.salesAdminPermissionSetFlag}">
On Behalf Of
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.On_Behalf_Of__r.Name}" />
</apex:pageBlockSectionItem> -->
                        <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),service.PAServicestate.currentrequest.pricingRequest.Request_Valid_From__c!=null)}">
                            Default Valid From
                            <apex:outputField value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Valid_From__c}"/>
                            
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),service.PAServicestate.currentrequest.pricingRequest.Request_Valid_To__c!=null)}">
                            Default Valid To
                            <apex:outputField value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Valid_To__c}"/>
                        </apex:pageBlockSectionItem>
                        
                        
                        <apex:pageBlockSectionItem rendered="{!!service.paServiceState.ogitems.isEndUserRebate}">
                            Request Type
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c}" />
                        </apex:pageBlockSectionItem>
                        <!-- PP20130715 START -->
                        <apex:pageBlockSectionItem rendered="{!AND(!service.paServiceState.ogitems.isEndUserRebate,service.paServiceState.ogItems.orgGroupItems.Enable_Request_Class__c)}">
                            Request Class
                            <apex:outputText value="{!service.paServiceState.currentRequest.pricingRequest.Request_Class__c}" />
                        </apex:pageBlockSectionItem>
                        <!-- BR20130819 -->
                        <!-- PP20130715 START -->
                        <apex:pageBlockSectionItem rendered="{!!service.paServiceState.ogitems.isEndUserRebate}">
                            Request Status
                            <apex:outputText value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Request_Approval_Status__c}" />
                        </apex:pageBlockSectionItem>
                        <!-- PP20130715 END -->
                        <!-- BR20130819 -->
                        <!-- VR20130812 Commented 
<apex:pageBlockSectionItem rendered="{!NOT(service.paServiceState.ogItems.orgGroupItems.Enable_Request_Class__c)}"/>
-->
                        <!-- PP20130715 END -->
                        
                        
                        <!-- PP20130715 START - Commenting as it is being moved after Request Reason-->
                        <!-- <apex:pageBlockSectionItem >
Status
<apex:outputText value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Request_Approval_Status__c}" />
</apex:pageBlockSectionItem>-->
                        <!-- PP20130715 END -->
                        <!-- SK20200512 Start-->
                <apex:pageBlockSectionItem rendered="{!OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific')}">
                   Request Reason
                    <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                </apex:pageBlockSectionItem>
                        <!-- SK20200512 End-->
                        
                        <!-- PP20130715 START -->
                        <!--                <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'))}">-->
                        <!--                </apex:pageBlockSectionItem>-->
                        <!-- PP20130715 END -->
                        <!-- AJ20150519 Added logic for displaying Request Reason for 'Free of Charge' Pricing Task -->
                        <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),NOT(service.paServiceState.ogitems.isEndUserRebate))}">
                            Request Reason
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                        </apex:pageBlockSectionItem>
                        
                        <!--      


<apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'}">
Pricing Task Type
<apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c}" />
</apex:pageBlockSectionItem> -->
                        
                        
                        
                        
                        <!-- BB20140429 START -->
                        <apex:pageBlockSectionItem rendered="{!AND(OR(service.paServiceState.ogItems.orgGroupItems.Default_Currency__c != 'No Default',service.paServiceState.ogItems.orgGroupItems.Default_Currency__c != null),service.PAServicestate.currentrequest.pricingRequest.Default_Currency__c!=null)}">
                            Default Currency
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Default_Currency__c}" />
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}">
                            <apex:outputLabel value="Default Per"/>
                            <apex:outPutField value="{!service.paServicestate.currentRequest.PricingRequest.Default_Per__c}" />
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogitems.isEndUserRebate}">
                            <apex:outputLabel value="Default UOM"/>
                            <apex:outPutField value="{!service.paServicestate.currentRequest.PricingRequest.Default_UoM__c}" />
                        </apex:pageBlockSectionItem>
                        
                        <!--  <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c == 'Customer Specific' && service.paServiceState.ogitems.isEndUserRebate}">
<apex:outputText value="Default Discount" />
<apex:outputText escape="false" value="{!service.PAServicestate.currentrequest.pricingRequest.Default_Discount__c}"/>
</apex:pageBlockSectionItem>-->
                        <!-- BB20140429 END -->
                        
                        <!-- NS20130821 START -->
                        <apex:pageBlockSectionItem rendered="{!AND(service.PAServicestate.currentRequest.PricingRequest.Request_Type__c=='Customer Specific',OR(service.PAServicestate.currentRequest.PricingRequest.Pricing_Request_Type__c == 'Permanent',service.PAServicestate.currentRequest.PricingRequest.Pricing_Request_Type__c == 'Pricing Task'),service.paServiceState.ogItems.orgGroupItems.Landing_Cost__c)}">
                            Landing Cost
                            
                            <apex:outputField value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Landing_Cost__c}" />  
                        </apex:pageBlockSectionItem>
                        <!--KS20220406 -->
                        <!-- KS20220406 Added logic for displaying Description for Pricing Request -->
                       <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentRequest.PricingRequest.Description__c!=''}">                              
                            Description 
                            <apex:outputField value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Description__c}" style="min-height:25px;max-height:100px;width:50%"/>  
                        </apex:pageBlockSectionItem>   
                        <!-- KS20220406 END -->     
                        <!-- NS20130821 END -->
                        <apex:pageBlockSectionItem rendered="{!AND(service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null,service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0,service.PAServicestate.currentRequest.PricingRequest.Request_Type__c!='Massive')}">   
                            Net Pricing Status
                            <!--HL20140904- commented to test  <apex:outputField id="NPCSTATUS" value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c}" />-->  
                            <apex:outputField value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c}" />
                        </apex:pageBlockSectionItem> 
                        <!-- SK20200512 Start-->
                        <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),service.paServiceState.ogitems.isEndUserRebate)}">
                    Request Reason
                    <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                </apex:pageBlockSectionItem>
                        <!-- SK20200512 End-->
                    </apex:pageBlockSection>
                    <!-- brundha Roll out 2 BR20130626 starts-->
                </div>
                <div class="pe">
                    <apex:pageBlockSection columns="1" rendered = "{!AND(service.PAServicestate.currentrequestitem.request.pricingRequest.Pricing_Exception__c != null,service.PAServicestate.currentRequest.PricingException<>null,service.PAServicestate.currentRequest.PricingException.size>0,service.PAServicestate.currentRequest.PricingRequest.Request_Type__c=='Customer Specific',service.PAServicestate.currentRequest.PricingRequest.Pricing_Request_Type__c == 'Permanent')}">
                        <!-- <apex:pageblocksectionitem rendered="{!AND(service.PAServicestate.currentRequest.PricingException.size>0,service.PAServicestate.currentRequest.PricingRequest.Request_Type__c=='Customer Specific',service.PAServicestate.currentRequest.PricingRequest.Pricing_Request_Type__c == 'Permanent')}"></apex:pageblocksectionitem> -->
                        <!-- VR20140107 DTT Rollout Issue - Added null condition check in rendered -->
                        <apex:pageBlockSectionItem >
                            Pricing Exceptions
                            <!--  <apex:selectList disabled="true">
<apex:selectOptions value="{!service.PAServicestate.currentrequest.PricingException}" /> 
</apex:selectList>-->
                            <apex:outputText escape="false" value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Pricing_Exception__c}" />  
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                </div>
                <!-- brundha Roll out 2 BR20130626 ends-->
            </div>
            
            
            <!-- SHIVA n SANJIB Approver Details START -->
            
            <!-- <BB20140321> START Added Added logic to populate Approvers in case of Auto Approval-->
            <!-- <MS20140421> Added Output Text fields to display Original approver name in case of Sent to Backup Approver -->
            <div class="priceReq">
                <apex:pageBlockSection title="Approver Details" rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Submitted' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Approved'}">
                    
                    <apex:pageBlockSectionItem >
                        Approver 1
                        <apex:outputPanel >
                            <apex:outputText value="{!if(MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1)=='null',if(service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level1__c == null,'',service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level1__c),
                                                    MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1))}" />
                        </apex:outputPanel>        
                    </apex:pageBlockSectionItem>
                     <!--AS20201026 updated 'Actual Approver' name to 'Escalted To'-->
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel rendered="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver1__r.Name!=MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('1',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1) && service.PAServicestate.currentrequest.pricingRequest.Approver1__r.Name!=null,true,false)}">
                            <apex:outputText value="Escalated To" style="font-family: Arial,Helvetica,sans-serif;font-size: 91%;font-weight: bold;color: #4a4a56;"/>
                            &nbsp;
                            <apex:outputText value="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver1__r.Name==null,'',service.PAServicestate.currentrequest.pricingRequest.Approver1__r.Name)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <!-- <MS20140513> Removed item as per new wireframe --> 
                    <!--   <apex:pageBlockSectionItem >
Sent To Backup Approver
<apex:outputField value="{!service.PAServicestate.currentrequest.pricingRequest.Sent_to_Backup_Approver__c}" />
</apex:pageBlockSectionItem> -->
                    
                    <apex:pageBlockSectionItem >
                        Approver 2
                        <apex:outputPanel >
                            <apex:outputText value="{!if(MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1)=='null',if(service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level2__c == null,'',service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level2__c),MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1))}" /> 
                        </apex:outputPanel> 
                    </apex:pageBlockSectionItem>
                     <!--AS20201026 updated 'Actual Approver' name to 'Escalted To'-->
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel rendered="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver2__r.Name!=MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('2',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1) && service.PAServicestate.currentrequest.pricingRequest.Approver2__r.Name!=null,true,false)}">
                            <apex:outputText value="Escalated To" style="font-family: Arial,Helvetica,sans-serif;font-size: 91%;font-weight: bold;color: #4a4a56;"/>
                            &nbsp;
                            <apex:outputText value="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver2__r.Name==null,'',service.PAServicestate.currentrequest.pricingRequest.Approver2__r.Name)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Approver 3
                        <apex:outputPanel >
                            <apex:outputText value="{!if(MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1)=='null',if(service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level3__c == null,'',service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level3__c),MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1))}" /> 
                        </apex:outputPanel> 
                    </apex:pageBlockSectionItem>
                     <!--AS20201026 updated 'Actual Approver' name to 'Escalted To'-->
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel rendered="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver3__r.Name!=MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('3',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1) && service.PAServicestate.currentrequest.pricingRequest.Approver3__r.Name!=null,true,false)}">
                            <apex:outputText value="Escalated To" style="font-family: Arial,Helvetica,sans-serif;font-size: 91%;font-weight: bold;color: #4a4a56;"/>
                            &nbsp;
                            <apex:outputText value="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver3__r.Name==null,'',service.PAServicestate.currentrequest.pricingRequest.Approver3__r.Name)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Approver 4
                        <apex:outputPanel >
                            <apex:outputText value="{!if(MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1)=='null',if(service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level4__c == null,'',service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level4__c),MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1))}" /> 
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                     <!--AS20201026 updated 'Actual Approver' name to 'Escalted To'-->
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel rendered="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver4__r.Name!=MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('4',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1) && service.PAServicestate.currentrequest.pricingRequest.Approver4__r.Name!=null,true,false)}">
                            <apex:outputText value="Escalated To" style="font-family: Arial,Helvetica,sans-serif;font-size: 91%;font-weight: bold;color: #4a4a56;"/>
                            &nbsp;
                            <apex:outputText value="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver4__r.Name==null,'',service.PAServicestate.currentrequest.pricingRequest.Approver4__r.Name)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Approver 5
                        <apex:outputPanel >
                            <apex:outputText value="{!if(MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('6',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1)=='null',if(service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level5__c == null,'',service.PAServicestate.currentrequest.pricingRequest.Auto_Approver_Level5__c),MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('6',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1))}" /> 
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                     <!--AS20201026 updated 'Actual Approver' name to 'Escalted To'-->
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel rendered="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver5__r.Name!=MID(service.PAServicestate.currentrequest.pricingRequest.approverText__c,FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)+1,FIND('6',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-FIND('5',service.PAServicestate.currentrequest.pricingRequest.approverText__c)-1) && service.PAServicestate.currentrequest.pricingRequest.Approver5__r.Name!=null,true,false)}" >
                            <apex:outputText value="Escalated To" style="font-family: Arial,Helvetica,sans-serif;font-size: 91%;font-weight: bold;color: #4a4a56;"/>
                            &nbsp;
                            <apex:outputText value="{!if(service.PAServicestate.currentrequest.pricingRequest.Approver5__r.Name==null,'',service.PAServicestate.currentrequest.pricingRequest.Approver5__r.Name)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                </apex:pageBlockSection>
            </div>
            
            
            <!-- <BB20140321> END-->
            <!-- SHIVA n SANJIB Approver Details END -->
            <!-- <GT20140913 Section for delegation comments -->
            <div class="priceReq" >
                <apex:pageBlockSection title="Delegation Comments" rendered="{!IF(service.PAServicestate.currentRequest.pricingRequest.Delegation_Comments__c!=null,true,false)}" >    
                    <apex:pageBlockSectionItem >
                        Delegation Comments
                        <apex:outputtext value="{!service.PAServicestate.currentRequest.pricingRequest.Delegation_Comments__c}"/>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </div>
            <!-- <GT20140913 Section for delegation comments -->
            <div class="priceReq">  
                <apex:pageblockSection title="Project Details" rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing'}">
                    <apex:pageBlockSectionItem >
                        Project ID
                        <apex:outputtext value="{!service.PAServicestate.currentRequest.projectPrice.Project_Id__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Project Name
                        <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Name}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Project Volume
                        <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Project_Volume__c}"/>
                    </apex:pageBlockSectionItem>
                    <!--                   <TJ20150603> -->
                    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentProjectPrice.disabledefdisc!=false}">
                        Default Discount
                        <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Default_Discount__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Valid From
                        <apex:outputField value="{!service.PAServicestate.currentRequest.projectPrice.Valid_From__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Valid To
                        <apex:outputField value="{!service.PAServicestate.currentRequest.projectPrice.Valid_To__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Project Status
                        <apex:actionSupport reRender="">
                            <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Project_Status__c}" />
                        </apex:actionSupport>
                    </apex:pageBlockSectionItem>
                    
                    
                    <apex:pageBlockSectionItem >
                        Pricing Condition
                        <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Pricing_Condition_Code__c} - {!service.PAServicestate.currentRequest.projectPrice.Pricing_Condition__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Task Assigned To
                        <apex:outputText value="{!service.PAServicestate.currentRequest.projectPrice.Assigned_To__r.Name}"/> 
                        <!--Ver 3.2 PS 2013-04-22 to display edited assigned to -->
                        <!--                  <apex:outputText value="{!service.PAServicestate.currentProjectPrice.currentRequest.userName}"/> -->
                    </apex:pageBlockSectionItem>
                    <!--                   <TJ20150602> -->
                    <apex:pageBlockSectionItem rendered="{!service.PAServicestate.currentProjectPrice.disabledefdisc!=false}"/>
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="Project Description" />
                        <apex:outputText value="{!service.PAServicestate.currentRequest.ProjectPrice.Project_Description__c}"  />
                    </apex:pageBlockSectionItem>
                    
                </apex:pageblockSection>
            </div>   
            
            <!-- <HL20140904> added rerender id NetPricingStatus-->
            <div class="priceReq"> 
                <apex:pageblockSection title="Request Details" id="NetProjPricingStatus"
                                       rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing'}">
                    <apex:pageBlockSectionItem >
                        Request ID
                        <apex:outputtext value="{!service.PAServicestate.currentrequest.pricingRequest.Name}" />
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Request Name
                        <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Name__c}" />
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        Request Status
                        <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c}" />
                    </apex:pageBlockSectionItem>
                    <!-- FIX FOR IS ID-00041544 ID   START-->  
                    <!-- SK20200512 Start-->
               <apex:pageBlockSectionItem >
                    Request Reasons
                    <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                </apex:pageBlockSectionItem>
                    <!-- SK20200512 End-->
                    <!-- FIX FOR IS ID-00041544 ID   END--> 
                    <apex:pageBlockSectionItem >
                        On Behalf Of
                        <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.On_Behalf_Of__r.Name}" />
                    </apex:pageBlockSectionItem>
                    
                    <!-- PP20130712 START -->
                    <apex:pageBlockSectionItem rendered="{!service.paServiceState.ogItems.orgGroupItems.Enable_Request_Class__c}">
                        Request Class
                        <apex:outputText value="{!service.paServiceState.currentRequest.pricingRequest.Request_Class__c}" />
                    </apex:pageBlockSectionItem>
                    <!-- PP20130712 END -->
                    <!-- MS20140925 Adding NPC status for project -->
                    <apex:pageBlockSectionItem rendered="{!AND(service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null,service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0,service.PAServicestate.currentRequest.PricingRequest.Request_Type__c!='Massive')}">   
                        Net Pricing Status
                        <!--HL20140904- commented to test  <apex:outputField id="NPCSTATUS" value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c}" />-->  
                        <apex:outputField value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c}" />
                    </apex:pageBlockSectionItem> 
                    <!-- SK20200512 STart-->
                    <apex:pageBlockSectionItem rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific'),service.paServiceState.ogitems.isEndUserRebate)}">
                    Request Reason
                    <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Reason__c}" />
                </apex:pageBlockSectionItem>
                    <!-- SK20200512 End-->
                    <!-- <DW20150520> -- exception field for Surfaces -->
                    
                    <apex:pageBlockSectionItem rendered = "{!AND(service.PAServicestate.currentRequest.PricingException<>null,service.PAServicestate.currentRequest.PricingException.size>0,service.PAServicestate.currentRequest.PricingRequest.Pricing_Request_Type__c == 'Project Pricing')}">
                        Pricing Exceptions
                        <apex:outputText value="{!service.PAServicestate.currentrequestitem.request.pricingRequest.Pricing_Exception__c}" />  
                    </apex:pageBlockSectionItem>
                    
                    <!-- <DW20150520> End -->                
                </apex:pageblockSection>
            </div>  
            
            
            <!-- Pricing Task details -->
            
            
            <div class="priceReq">
                <div class="priceTask">
                    <apex:pageBlockSection title="Task Details"
                                           rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'}">
                        <apex:pageBlockSectionItem >
                            Due Date
                            <apex:outputText value="{0,date,dd'-'MM'-'yyyy}">
                                <apex:param name="VF" value="{!service.PAServicestate.currentrequest.pricingRequest.Due_Date__c}" />
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem >
                            Assigned To
                            <apex:outputText value="{!service.PAServicestate.currentRequest.userName}" />
                            
                            
                        </apex:pageBlockSectionItem>
                        
                    </apex:pageBlockSection>
                </div>
                
                <div class="csr">
                    <apex:pageBlockSection columns="2" rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task'}">               
                        <apex:pageBlockSectionItem >
                            Task Subject
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.Task_Subject__c}" style="width:945px;"/>
                        </apex:pageBlockSectionItem>
                        <!-- <TJ20141230> Added Link to open task in new tab-->
                        <apex:pageBlockSectionItem rendered="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved',true,false)}">
                            <apex:outputText value="Task Link" />
                            <apex:commandLink onclick="window.open('/{!service.PAServicestate.Currentrequestitem.taskID}', '_blank'); return false;" >{!service.PAServicestate.currentrequest.pricingRequest.Task_Subject__c}                            
                            </apex:commandLink>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem datastyle="margin:left">
                            CSR Instructions
                            <apex:outputText value="{!service.PAServicestate.currentrequest.pricingRequest.CSR_Instruction__c}"
                                             escape="false" />
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                </div>
            </div>
            
            <!-- Table of Added Records Section-->
            <!--Updated by Nadeem Shaik to add request reason to Rebate request types - IS ID-00068874 - Start-->
            <div class="priceReq">
                <apex:pageBlockSection title="Rebate Agreement Details"
                                       rendered="{!service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement'|| 
                                                 service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate payout'|| 
                                                 service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate adjustment'||
                                                 service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Payout Product Shipment'}">    <!--SS20230501-->
                    <!--Updated by Nadeem Shaik to add request reason to Rebate request types - IS ID-00068874 - End-->
                    <apex:pageBlockSectionItem >
                        Valid From
                        <apex:outputPanel style="float:left;">
                            <div id="valFrom" class="requiredInput" style="float:left;">
                                <div class="requiredBlock" style="float:left;"></div>
                                <!-- VR20130829 RollOut2 Issue fix -->
                                <apex:inputField id="validFromReb" style="float:left;margin: 0px;" value="{!service.PAServicestate.currentrequestItem.pricingRequest.Request_Valid_From__c}"/>
                                <!--   Start: Added By Sumit Gupta "Valid From" -->
                                <apex:inputField id="validToReb11" style="float:left;margin: 0px;" value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Valid_From__c}" rendered="{!ValidityGetDates}"/>
                                <script>document.getElementById('{!$Component.validToReb11}').disabled =true; </script>
                                <!--   End: Added By Sumit Gupta "Valid From" -->
                                    <script>document.getElementById('{!$Component.validFromReb}').disabled = {!NOT(AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')))))}; </script>               <!--  Shiva for IT Admin profile  -->
                            </div>
                            
                            
                        </apex:outputPanel> 
                    </apex:pageBlockSectionItem>
                    
                    
                    <apex:pageBlockSectionItem >
                        Valid To
                        <apex:outputPanel style="float:left;">
                            <div id="valTo" class="requiredInput" style="float:left;">
                                <div class="requiredBlock" style="float:left;"></div>
                                <!-- VR20130829 RollOut2 Issue fix -->
                                <apex:inputField id="validToReb" style="float:left;margin: 0px;" value="{!service.PAServicestate.currentrequestItem.pricingRequest.Request_Valid_To__c}" rendered="{!ValiditySetDates}"/>
                                <!--   Start: Added By Sumit Gupta "Valid To" -->
                                <apex:inputField id="validToReb1" style="float:left;margin: 0px;" value="{!service.PAServicestate.currentrequest.pricingRequest.Request_Valid_To__c}" rendered="{!ValidityGetDates}"/>
                                <script>document.getElementById('{!$Component.validToReb1}').disabled =true; </script>
                                <!--   End: Added By Sumit Gupta "Valid To" -->
                                    <script>document.getElementById('{!$Component.validToReb}').disabled = {!NOT(AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')))))}; </script>                     <!--  Shiva for IT Admin profile  -->
                                
                            </div>
                            
                        </apex:outputPanel> 
                    </apex:pageBlockSectionItem>
                    
                </apex:pageBlockSection>
            </div>
            <!-- sanjib commnted this from component show button link NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id), -->
            
            <div class="pricesSection" id="container">
                
                <apex:pageBlockSection title="Pricing Records" columns="1" rendered="{!service.PAServicestate.currentRequestItem.pclDisplayString<>'PCLDisplay'}">
                    <!-- MS20140627 -->
                    <apex:outputPanel rendered="{!AND(service.PAServicestate.currentRequestItem.relatedWrappersList!=null,service.PAServicestate.currentRequestItem.relatedWrappersList.size>0)}" >
                        <div id="buttons" style="float:left;text-align:center;padding:0px 0px 10px 0px;">
                            <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                            <!-- PP20140514 START -->
                            <div id="buttonsNPC" style="float:left;text-align:center;">
                                <apex:commandLink value="{!$Label.Net_Pricing_Button}" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                                  rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),                                       
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Free of Charge' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                            NOT(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c == 'Massive')) && $Profile.Name != 'Viewer' 
                                                            && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                            && (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0)}" >
                                    <apex:param name="newPageLabel" value="PAPricingRequest"  assignTo="{!newPageLabel}" />
                                    <apex:param name="desiredAction" value="bulkNPCCal" assignTo="{!businessAction}"/>
                                    <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                    <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                                </apex:commandLink>
                            </div>
                            <!--SS20230501- Enabling/disabling view floor pricing button --> 
                            <div id="buttonsFlrRefView" style="float:left;text-align:center;">   
                                <apex:commandLink value="{!$Label.Floor_Reference_Price_View_Button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}"
                                                  rendered = "{!(service.PAServiceState.currentRequest.pricingRequest.isFloorApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isFloorApplicable__c > 0 && service.paServicestate.currentRequestItem.HideFloorSec==FALSE) 
                                                              || (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0 && service.paServicestate.currentRequestItem.HideFloorSec==FALSE)}">
                                    <apex:param name="desiredAction" value="PriceView"
                                                assignTo="{!businessAction}" />
                                    <apex:param name="newPageLabel" 
                                                assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                                    <apex:param name="salesvolume" value="false" assignTo="{!sVolume}"/>
                                </apex:commandLink> 
                            </div>
                            <!-- PP20140514 END -->
                            
                            <div id="buttonsProject" style="float:left;text-align:center;">
                                <apex:commandLink value="Add Project Material" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                                  rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' && 
                                                            service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Submitted' &&
                                                            service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c !='Waiting for Net Price' &&
                                                            service.paServiceState.currentProjectPrice !=null &&
                                                            (service.PAServicestate.currentRequestItem.paProjectPrice.projectAction ='clone' ||
                                                            service.PAServicestate.currentRequestItem.paProjectPrice.projectSelection ='clone' ||
                                                            service.PAServicestate.currentRequestItem.paProjectPrice.dispRecordsFromSAP='IdApprovedProject' ||
                                                            service.PAServicestate.currentRequestItem.paProjectPrice.dispRecordsFromSAP='editApprovedProject')}" >
                                    <apex:param name="newPageLabel" value="PANewProject"  assignTo="{!newPageLabel}"   />
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(Contains(navigationText,'Project Selection'),'Project Selection',$Label.Price_Request)}" assignTo="{!pageName}"/>
                                    <apex:param name="desiredAction" value="AddProjectMaterial"  assignTo="{!businessAction}"   />
                                </apex:commandLink> 
                            </div> 
                            <!-- Added By bala --> 
                            <!-- Ver 3.1 -- Added condition - If there are records, then only display this button-->
                            <apex:commandLink value="Add Material" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                              rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' &&
                                                        (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id) && 
                                                        service.paServiceState.currentProjectPrice !=null &&
                                                        service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Submitted' &&
                                                        service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c !='Waiting for Net Price' &&
                                                        service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Approved' &&
                                                        service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Completed'  
                                                        && service.PAServiceState.currentRequestItem.displayAddPricesButton }" > <!--version 1.4  -->
                                <apex:param name="newPageLabel" value="PAAddProjectRequest"  assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.Add_Project_Request),$Label.Add_Project_Request,$Label.Price_Request)}" assignTo="{!pageName}"/>
                                <apex:param name="desiredAction" value="AddMaterial" assignTo="{!businessAction}"/>
                                <apex:param name="setProjectID" value="Edit-{!service.PAServicestate.currentRequest.pricingRequest.Project_Price__c}" assignTo="{!service.PAServicestate.currentProjectPrice.selectedProjectId}"/>
                                <apex:param name="new" value="false" assignTo="{!newLink}"/>
                            </apex:commandLink> 
                            
                            
                            <!-- NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' && (service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId!=$User.Id)), -->
                            <!--  Shiva for IT Admin profile  -->
                            
                            <apex:commandLink value="{!$Label.Edit_Header_Button}"
                                              action="{!businessComponentAction}" styleClass="btn"
                                              style="text-decoration:none"
                                              rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                        
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                        NOT(service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c =='Waiting for Net Price'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing'))
                                                        &&$Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.CreatedById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' ||service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled')  && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester') )))
                                                        }"   >
                                
                                <apex:param name="desiredAction" value="EditHeader"
                                            assignTo="{!businessAction}" />
                                <apex:param name="assignId" value="{!service.PAServicestate.currentrequest.pricingRequest.Id}"
                                            assignTo="{!service.PAServicestate.currentrequest.pricingRequestId}" />
                                <apex:param name="newPageLabel" value="PANewRequest"
                                            assignTo="{!newPageLabel}" />  
                                <apex:param name="cloneflag" value="false" assignTo="{!service.PAServicestate.currentRequest.cloneFlag}"/>
                                <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.New_Request) || CONTAINS(navigationText,$Label.Price_request_clone),IF(service.PAServicestate.currentRequest.cloneFlag==true,$Label.Price_request_clone,$Label.New_Request),$Label.Price_Request)}" assignTo="{!pageName}"/>
                            </apex:commandLink> 
                            
                            <!--Ver 3.3 PS 2013-04-18 APAC Rollout-ADDING Edit Header button for Project Prices  -->
                            <apex:commandLink value="{!$Label.Edit_Header_Button}"
                                              action="{!businessComponentAction}" styleClass="btn"
                                              style="text-decoration:none"
                                              rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Waiting for Net Price'),
                                                        (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' ))
                                                        &&$Profile.Name != 'Viewer' && service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id
                                                        }"   >
                                <!--  <apex:param name="projectSelection1" value="edit" assignTo="{!service.PAServicestate.currentProjectPrice.projectSelection}"/>  --> 
                                <!-- <apex:param name="projectSelection2" value="Edit" assignTo="{!service.PAServicestate.currentProjectPrice.projectAction}"/> -->
                                
                                <apex:param name="assignId" value="Edit-{!service.PAServicestate.currentRequest.pricingRequest.Project_Price__c}"
                                            assignTo="{!service.PAServicestate.currentProjectPrice.selectedProjectId}" />
                                <apex:param name="editHeaderProject" value="editHeaderApprovedProject"
                                            assignTo="{!service.PAServicestate.currentProjectPrice.editHeaderApproved}" />
                                <apex:param name="editHeaderProject1" value="null"
                                            assignTo="{!service.PAServicestate.currentProjectPrice.dispRecordsFromSAP}" />  
                                <apex:param name="newPageLabel" value="PANewProject"
                                            assignTo="{!newPageLabel}" /> 
                                <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Project Selection'),'Project Selection',$Label.Price_Request)}" assignTo="{!pageName}"/> 
                                <apex:param name="desiredAction" value="EditProjectHeader"
                                            assignTo="{!businessAction}" />
                                
                            </apex:commandLink> 
                            <!-- ENDING Edit Header button -->
                            
                            <apex:actionRegion >
                                <!-- Ver 3.1 -- Added condition - If there are records, then only display this button-->
                                <!--  Shiva for IT Admin profile  -->
                                <!-- PP20140512 - removed displayAddPricesButton and changed navigation on click -->
                                <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                                <apex:commandLink value="{!if(CONTAINS(service.PAservicestate.currentRequest.pricingRequest.Request_Type__c,'Non Customer Specific'),$Label.Price_Record_List,$Label.Add_Prices_Button)}"
                                                  action="{!businessComponentAction}" styleClass="btn"
                                                  style="text-decoration:none;width:auto"   
                                                  rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                            
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                            NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing')) &&$Profile.Name != 'Viewer' 
                                                            && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                            && service.PAServiceState.currentRequestItem.displayAddPricesButton}">
                                    
                                    
                                    <apex:param name="desiredAction" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'AddPricesReqCreated',IF(service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'AddPrices','AddPricesNCS'))}"
                                                assignTo="{!businessAction}" />
                                    <!--                         <TJ20140923> -->                        
                                    <apex:param name="newPageLabel" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'PACurrentPrices','PAAddReqItem')}"
                                                assignTo="{!newPageLabel}" />
                                    <!-- <apex:param name="curPrices" value="{!IF(AND(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'),OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled')),'viewPricesOnLoad','')}" assignTo="{!service.PAServicestate.erpCustomer.currentPrices}" /> -->
                                    <apex:param name="curPrices" value="{!IF(AND(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific', service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'), OR(service.PAServicestate.currentrequest.csvString==null,service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled')),'viewPricesOnLoad','')}" assignTo="{!service.PAServicestate.erpCustomer.currentPrices}" />
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,IF(CONTAINS(navigationText,($Label.Current_Prices)),$Label.Current_Prices,$Label.Price_Request),IF(CONTAINS(navigationText,($Label.Add_Req_Item)),$Label.Add_Req_Item,$Label.Price_Request))}" assignTo="{!pageName}"/>
                                    <apex:param name="doneButton" value="{!IF(service.PAServicestate.currentRequest.keyCombination.keyCombinationID!='--Select--'&&service.PAServicestate.currentRequest.keyCombination.keyCombinationID!=null,false,true)}" assignTo="{!done_button}"/>
                                </apex:commandLink>
                            </apex:actionRegion> 
                            <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                            <!-- PP20140512 START -->
                            <apex:commandLink value="{!$Label.Add_Materials_Button}"
                                              action="{!businessComponentAction}" styleClass="btn"
                                              style="text-decoration:none"   
                                              rendered="{!AND(
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                        
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c='Project Pricing')) &&$Profile.Name != 'Viewer' 
                                                        && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                        && service.PAServiceState.currentRequestItem.displayAddMaterialButton && NOT(service.PAServicestate.ogitems.isEndUserRebate)}">
                                
                                <!-- <TJ20140925>-->
                                <apex:param name="desiredAction" value="{!IF(service.PAServicestate.currentRequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentRequest.pricingRequest.Request_Type__c ==  'Customer Specific','NewMaterial',IF(Contains(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c,'Massive'),'NewPricingReqItemsoldtoSelect','NewPricingReqItem'))}" assignTo="{!businessAction}"/>
                                <apex:param name="newPageLabel" value="{!IF(Contains(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c,'Massive'),'PACustomerDetail','PAEditReqItem')}" assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing Label for Displaying Navigation Flow -->
                                <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.Edit_Req_Item),$Label.Edit_Req_Item,$Label.Price_Request)}" assignTo="{!pageName}"/>
                                <apex:param name="new" value="false" assignTo="{!newLink}"/>
                            </apex:commandLink>
                            <!-- PP20140512 END --> 
                            
                            
                            <!-- BB20140304 Added rendered condition to hide the submit button for Pricing task and Project Pricing-->
                            <!--                  <apex:commandLink value="{!$Label.Submit_Button}" action="{!businessComponentAction}" styleClass="btn"
style="text-decoration:none;"   
rendered="{!AND(NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),OR(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id,service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id,service.paServiceState.ogItems.isBUAdmin),NOT(OR(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Permanent'&& service.paServiceState.currentrequest.pricingRequest.Attachments_on_Customer_Prices__c),service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing')))}">

<apex:param name="desiredAction" value="submitCalculation"
assignTo="{!businessAction}" />
<apex:param name="newPageLabel" value="PAPricingRequest"
assignTo="{!newPageLabel}" />
<!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <!--          <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
</apex:commandLink>    -->
                            
                            <!-- adding approval buttons here for UI Prachi 7th feb -->
                            <apex:outputPanel rendered="{!service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id && service.PAServiceState.currentRequestItem.request.pricingRequest.Request_Approval_Status__c=='Submitted'}">
                                <div style="float:left;text-align:center;">   
                                    <!--<IS ID-00076073> Mansi - Hide Approve button for BU admins DPP Polymers EMEA -- added rendered condition -->
                                    <apex:commandLink value="{!$Label.Approve_Button}"
                                                      action="{!businessComponentAction}" styleClass="btn"
                                                      style="text-decoration:none;"
                                                      rendered="{!NOT(service.PAServicestate.currentRequest.pricingRequest.BU__c == $Label.BU_Name && service.PAServicestate.currentRequest.pricingRequest.Current_Approver__r.profile.name == $Label.BU_Admin_Profile_Name)}" >
                                        
                                        <apex:param name="desiredAction" value="approve"
                                                    assignTo="{!businessAction}" />
                                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                                    assignTo="{!newPageLabel}" />
                                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                                    </apex:commandLink> &nbsp;&nbsp; <apex:commandLink value="{!$Label.Reject_Button}"
                                                                                       action="{!businessComponentAction}" styleClass="btn" 
                                                                                       style="text-decoration:none;"   >
                                    
                                    <apex:param name="desiredAction" value="reject"
                                                assignTo="{!businessAction}" />
                                    <apex:param name="newPageLabel" value="PAPricingRequest"
                                                assignTo="{!newPageLabel}" />
                                    <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                    <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                                    </apex:commandLink> 
                                </div>
                            </apex:outputPanel>
                            <!-- AV20140515-added sales volume button -->
                            <div id="buttonsVol" style="float:left;text-align:center;">   
                                <apex:commandLink value="{!$Label.Sales_volume_button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" 
                                                  rendered = "{!service.PAServicestate.currentrequest.pricingRequest.isVolumeApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isVolumeApplicable__c > 0}">
                                    <apex:param name="desiredAction" value="volumeView"
                                                assignTo="{!businessAction}" />
                                    <apex:param name="newPageLabel" 
                                                assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                                    <apex:param name="salesvolume" value="true" assignTo="{!sVolume}"/>
                                </apex:commandLink> 
                            </div>
                            <div id="buttonsFlrRefView" style="float:left;text-align:center;">   
                                <apex:commandLink value="{!$Label.Payment_Terms_Button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" 
                                                  rendered = "{!service.PAServicestate.currentrequest.pricingRequest.isPaymentTermsApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isPaymentTermsApplicable__c > 0}">
                                    <apex:param name="desiredAction" value="PayTermsView"
                                                assignTo="{!businessAction}" />
                                    <apex:param name="newPageLabel" 
                                                assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                                    <apex:param name="salesvolume" value="false" assignTo="{!sVolume}"/>
                                </apex:commandLink> 
                            </div>
                            <div style="float:left;text-align:center;">
                                <apex:commandLink value="{!$Label.Quit_Button}"     styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" onclick="return confirm('{!$Label.Quit_Request_Confirmation}');">
                                    <apex:param name="desiredAction" value="Quit"
                                                assignTo="{!businessAction}" />
                                    <apex:param name="newPageLabel" 
                                                assignTo="{!newPageLabel}"
                                                value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Approved',service.PAServicestate.currentrequest.csvString=='Submitted',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),'PAStatus',IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific','PACustomerRequests','PAMassiveAndPriceListRequests'))}" />
                                    <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                    <apex:param name="pageName" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Approved',service.PAServicestate.currentrequest.csvString=='Submitted',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.csvString+' Request'),service.PAServicestate.currentrequest.csvString+' Request',$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific',IF(CONTAINS(navigationText,$Label.Customer_Requests),$Label.Customer_Requests,$Label.Price_Request),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests'),service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests',$Label.Price_Request)))}" assignTo="{!pageName}"/> 
                                </apex:commandLink> 
                            </div>
                            <!-- VR20131023 DTT Rollout issue--> 
                            <apex:commandLink value="{!IF(service.PAServicestate.ogitems.isEndUserRebate,'Generate Customer Quote','PCL')}"   styleClass="btn" style="text-decoration:none;" action="{!businessComponentAction}" rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Approved' && (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' || service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing')) && service.PAServicestate.currentRequestItem.pclDisplayString<>'PCLDisplay' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)}">
                                <apex:param name="desiredAction" value="showPCL"
                                            assignTo="{!businessAction}"  />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />                
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>                
                            </apex:commandLink> 
                            
                            <!----komathi for floor pricing button---->
                            <apex:commandLink value="Floor Pricing"
                                              action="{!businessComponentAction}" styleClass="btn"
                                              style="text-decoration:none"
                                              rendered="{!AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Import',
                                                        (service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Validated'||
                                                        service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Recalled'||
                                                        service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Draft'))}" >
                                <apex:param name="desiredAction"
                                            value="flagCheck" assignTo="{!businessaction}" />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                            </apex:commandLink>
                            <!-- --fp ends check -->
                            
                            <!--  Shiva for IT Admin profile  -->  
                            <apex:commandLink value="{!$Label.Abandon_Button}"   
                                              onclick="return confirm('{!$Label.Abandon_Request_Confirmation}');" action="{!businessComponentAction}" styleClass="btn" style="text-decoration:none;"
                                              rendered="{!AND(NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                        NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                        NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                        NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                        NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price')) && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)|| ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled' )&& (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')))}" >
                                <apex:param name="desiredAction" value="Abandon" assignTo="{!businessAction}" />
                                <!-- Version 3.5 -->
                                <!-- PP20141029 STARTS Issue #50 - SIT - Wave - 2 commenting out until line 1146-->
                                <!--                         <apex:param name="newPageLabel" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),'PAStatus',IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent','PACurrentPrices',IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific','PACustomerRequests','PAMassiveAndPriceListRequests')))}" -->
                                <!--                             assignTo="{!newPageLabel}" /> -->
                                <apex:param name="newPageLabel" value="PAHome" assignTo="{!newPageLabel}" />
                                <!--                         <apex:param name="curPrices" value="{!IF(CONTAINS(newPageLabel,'PACurrentPrices'),'viewPricesOnLoad','')}" assignTo="{!service.PAServicestate.erpCustomer.currentPrices}" /> -->
                                <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                                <!--                             <apex:param name="pageName" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.csvString+' Request'),service.PAServicestate.currentrequest.csvString+' Request',$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent',IF(CONTAINS(navigationText,$Label.Current_Prices),$Label.Current_Prices,$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific',IF(CONTAINS(navigationText,$Label.Customer_Requests),$Label.Customer_Requests,$Label.Price_Request),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests'),service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests',$Label.Price_Request))))}" assignTo="{!pageName}"/> -->
                            </apex:commandLink>  
                            
                            <!--  <HL20140904> Added refresh button for NPC Refresh  --> 
                            <div style="float:left;text-align:center;">
                                <apex:commandLink value="Refresh"  action="{!service.PAServicestate.currentrequest.getUpdatedPricingRequest}" oncomplete="loadDatatables();" rerender="NetPricingStatus,apphistory,NetFLRREF,NetProjPricingStatus"
                                                  style="text-decoration:none" status="stat"
                                                  styleClass="btn"  
                                                  rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'}" >
                                    <!--    rendered="{!AND(NOT(service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c =='Completed'),
NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
(service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null),service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0) }" >  --> 
                                    <!--   rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),-->
                                    <!--              NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'), -->                                      
                                    <!--               NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),-->
                                    <!--              NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Free of Charge'),-->
                                    <!--              NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),-->
                                    <!--             NOT(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c == 'Massive')) && $Profile.Name != 'Viewer' -->
                                    <!--             && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester')))) -->
                                    <!--             && (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0)}" >  -->                         
                                    <!--  <apex:param name="desiredAction" value="getUpdatedPricingRequest" -->
                                    <!--   assignTo="{!businessAction}" />  -->
                                    <!--   <apex:param name="newPageLabel" value="PAPricingRequest"  -->
                                    <!--   assignTo="{!newPageLabel}" />  -->
                                </apex:commandLink> 
                            </div>
                            <!-- <GT20150114> -->
                            <div id="buttonsFlrRefView" style="float:left;text-align:center;"> 
                                <apex:commandLink value="Send Email" onclick="mailToOutlook()" styleClass="btn" style="text-decoration:none;" rendered="{!(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted')}" >
                                </apex:commandLink> 
                            </div>
                            <apex:commandLink value="{!$Label.Cancel_Button}" styleClass="btn" style="text-decoration:none;" 
                                              onclick="return confirm('{!$Label.Cancel_Task_for_CSR_Confirmation}');"      action="{!businessComponentAction}"
                                              rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved' && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || $User.Id == service.PAServiceState.currentrequest.pricingRequest.ownerId)}" >
                                <apex:param name="desiredAction" value="CancelTask"
                                            assignTo="{!businessAction}" />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                            </apex:commandLink>
                            
                            
                            <apex:commandLink value="{!$Label.Clone_Button}"  action="{!businessComponentAction}"   
                                              styleClass="btn" style="text-decoration:none;" rendered="{!(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled') && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || $User.Id == service.PAServiceState.currentrequest.pricingRequest.ownerId)}" >
                                <apex:param name="desiredAction" value="CloneRequest"
                                            assignTo="{!businessAction}" />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                            </apex:commandLink>
                            
                            <!-- Ver 2.1 START -->
                            <!-- PP20140417 edited recall button render condition -->
                            <apex:commandLink value="{!$Label.Recall_Button}" styleClass="btn" style="text-decoration:none;"
                                              onclick="return confirmRecall('{!service.PAServiceState.currentrequest.pricingRequest.Id}')" action="{!businessComponentAction}"   
                                              rendered="{!OR((service.paServiceState.ogItems.isBUAdmin && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.paServiceState.ogItems.salesAdminPermissionSetFlag && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'&& service.paServiceState.ogItems.isRequester && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)),(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted' && service.paServiceState.ogItems.isBUAdmin && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)))}">     <!-- || contains($Profile.Name,'BU Admin') -->
                                <apex:param name="desiredAction" value="recall"
                                            assignTo="{!businessAction}" /> 
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                            </apex:commandLink>
                            <!-- Ver 2.1 END --> 
                            
                            <!-- VR20140221  Reassign button uncommented -->
                            <apex:commandLink value="{!IF(service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id,$Label.Delegate_Button,$Label.Reassign_Button)}"
                                              action="{!businessComponentAction}" styleClass="btn"   
                                              style="text-decoration:none;" rendered="{!(service.paServiceState.ogItems.isBUAdmin || service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id) && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'}">
                                
                                <apex:param name="desiredAction" value="popupreassign"
                                            assignTo="{!businessAction}" />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                            </apex:commandLink>                   
                        </div> 
                    </apex:outputPanel>
                    <!-- <HL20140904> added rerender id NetFLRREF-->
                    <!-- IM20150123 Applying RPQ condition to show diff set of fields-->
                    <!--                 <apex:outputPanel id="NetFLRREF" rendered="{! NOT(service.PAServiceState.ogitems.isEndUserRebate) && service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c<> 'Rebate Agreement' && service.PAServicestate.currentRequestItem.relatedListProjectTaskRecords == NULL}"> -->
                    <!--                 <apex:repeat value="{!service.PAServicestate.currentRequestItem.relatedWrappersList}" -->
                    <!--                         var="wrapper"> -->
                    <!--                     Ver 1.7,1.9, 3.1 START -->
                    <!--                      Shiva for IT Admin profile  -->
                    <!--                     PP20140224 -->
                    <!--                     MS20140922 Adding apply changes section for Project pricing -->
                    <!--                     MS20140923 Adding attribute for MG5                     -->
                    <!--                     <c:PARequestItemRelatedList BUSalesArea="{!service.PAServicestate.currentRequestItem.request.pricingRequest.BU__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Sales_Org_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Dist_Channel_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Division_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c}" -->
                    <!--                         ShowNetFloor="{!service.PAServicestate.currentRequest.isNetFloorVisible}" -->
                    <!--                         WrapperRecordsDisp="{!wrapper.wrapperList}" -->
                    <!--                         columnsDisp="{!wrapper.keyCombinationcolumns}" -->
                    <!--                         pricingRecordColumns="{!wrapper.commonColumns}"  -->
                    <!--                         viewMode="{!currentPageLabel}" -->
                    <!--                         selected="{!service.PAServicestate.currentRequestItem.pricingRequestItemId}" -->
                    <!--                         actionAtr="{!businessaction}" typeOfRequest="{!wrapper.priceType}" -->
                    <!--                         typeOfSObjectList="{!wrapper.sObjectTypeName}" showCheckBox="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Abandoned' && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'  && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Submitted' && service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c!='Waiting for Net Price'}" -->
                    <!--                         showSelectButtons="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin'))))}" -->
                    <!--                         showChangesSection="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted')) && (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive' ||service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific' || (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'||service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing')))}" -->
                    <!--                         newFieldColumns="{!wrapper.newValueColumns}" -->
                    <!--                         scaledFlagColumns="{!wrapper.scaleColumns}" -->
                    <!--                         actionShowFlag="{!OR(service.paServiceState.currentRequestItem.popUpflag=='validate' || (service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Abandoned' && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'  && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Submitted' && service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c!='Waiting for Net Price') && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')) || contains($Profile.Name,'Price Requester')), wrapper.hasScaledRecordFlag)}" -->
                    <!--                         showSoldToColumns="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive' ,true,false)}" -->
                    <!--                         showFlag="true" pricingRequest="{!service.PAServicestate.currentrequest.pricingRequest.Id}"  -->
                    <!--                         showStandardizedRate="{!wrapper.hasApproverPermissionFlag}"  -->
                    <!--                         labelName="{!pageName}" currentHeader="{!$Label.Price_Request}" editlink="{!newlink}" -->
                    <!--                         navigation="{!navigationText}" errorflag="{!prTable}" reqType="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c}" pReqType="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c}" -->
                    <!--                         floorView="{!service.PAServicestate.currentRequestItem.priceViewClicked}"  enableScale="{!service.PAServicestate.currentRequestItem.enableScale}" -->
                    <!--                         isScalePrice="{!wrapper.isScalePrice}" scalePr="{!service.PAServicestate.currentrequestitem.scalePrices}" showMG5="{!AND(service.paServicestate.ogitems.OrgGroupItems.Enable_Material_Group_5__c,IF(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c!='Project Pricing',true,false))}" -->
                    <!--                         showProj="{!wrapper.projectPC}"> -->
                    
                    
                    <!--                          <BB20130712> -- Ver  3.6 START Removed showStandardizedRate from the component PARequestItemRelatedList   -->
                    
                    <!--                       Ver  3.6 END -->
                    <!--                     </c:PARequestItemRelatedList> -->
                    <!--                     Ver 1.7, 1.9, 3.1 END -->
                    
                    <!--                         </apex:repeat> -->
                    <!--                         </apex:outputPanel> -->
                    
                    <!-- IM20150123 Applying RPQ condition to show diff set of fields-->
                    <!-- <AV20152407>-Start-Code refactoring for view state error- -->
                    <apex:outputPanel id="NetFLRREF" rendered="{! service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c<> 'Rebate Agreement' && service.PAServicestate.currentRequestItem.relatedListProjectTaskRecords == NULL}">
                        
                        <apex:repeat value="{!service.PAServicestate.currentRequestItem.relatedWrappersList}"
                                     var="wrapper">
                            <!-- Ver 1.7,1.9, 3.1 START -->
                            <!--  Shiva for IT Admin profile  -->
                            <!-- PP20140224 -->
                            <!-- MS20140922 Adding apply changes section for Project pricing -->
                            <!-- MS20140923 Adding attribute for MG5-->                    
                            
                            <c:PARequestItemRelatedList BUSalesArea="{!service.PAServicestate.currentRequestItem.request.pricingRequest.BU__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Sales_Org_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Dist_Channel_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Division_Code__c}-{!service.PAServicestate.currentRequestItem.request.pricingRequest.Request_Type__c}"
                                                        ShowNetFloor="{!IF(service.PAServiceState.ogitems.isEndUserRebate,false,service.PAServicestate.currentRequest.isNetFloorVisible)}"
                                                        WrapperRecordsDisp="{!wrapper.wrapperList}"
                                                        columnsDisp="{!wrapper.keyCombinationcolumns}"
                                                        pricingRecordColumns="{!wrapper.commonColumns}"
                                                        RPQColumns="{!IF(service.PAServiceState.ogitems.isEndUserRebate,wrapper.RPQColumns,'')}" 
                                                        RPQApproverColumns="{!IF(service.PAServiceState.ogitems.isEndUserRebate,wrapper.RPQApproverColumns,'')}" 
                                                        showRPQColumns="{!service.paServiceState.ogitems.isEnduserRebate}"
                                                        defaultRateChg="{!IF(service.PAServiceState.ogitems.isEndUserRebate,wrapper.RateChange,'')}"
                                                        defaultQuantity="{!IF(service.PAServiceState.ogitems.isEndUserRebate,'1','')}"
                                                        showRPQApproverColumns="{!AND(wrapper.showApproverColumns,service.paServiceState.ogitems.isEnduserRebate)}"
                                                        viewMode="{!currentPageLabel}"
                                                        selected="{!service.PAServicestate.currentRequestItem.pricingRequestItemId}"
                                                        actionAtr="{!businessaction}"
                                                        typeOfRequest="{!wrapper.priceType}"
                                                        
                                                        typeOfSObjectList="{!wrapper.sObjectTypeName}" 
                                                        showCheckBox="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Abandoned' && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'  && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Submitted' && service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c!='Waiting for Net Price'}"
                                                        showSelectButtons="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin'))))}"
                                                        showChangesSection="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted')) && (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive' ||service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Non Customer Specific' || (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'||service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing'  || (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentrequest.pricingRequest.BU__c == 'BI AP Surfaces' ))))}"
                                                        newFieldColumns="{!wrapper.newValueColumns}"
                                                        scaledFlagColumns="{!wrapper.scaleColumns}"
                                                        actionShowFlag="{!OR(service.paServiceState.currentRequestItem.popUpflag=='validate' || (service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Abandoned' && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'  && service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Submitted' && service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c!='Waiting for Net Price') && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')) || contains($Profile.Name,'Price Requester')), wrapper.hasScaledRecordFlag)}"
                                                        showSoldToColumns="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Massive' ,true,false)}"
                                                        showFlag="true" 
                                                        showExpireLink="false"
                                                        pricingRequest="{!service.PAServicestate.currentrequest.pricingRequest.Id}" 
                                                        showStandardizedRate="{!wrapper.hasApproverPermissionFlag}" 
                                                        labelName="{!pageName}" 
                                                        currentHeader="{!$Label.Price_Request}" 
                                                        editlink="{!newlink}"
                                                        navigation="{!navigationText}" errorflag="{!prTable}" 
                                                        reqType="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c}" 
                                                        pReqType="{!service.PAServicestate.currentrequest.pricingRequest.Request_Type__c}"
                                                        floorView="{!service.PAServicestate.currentRequestItem.priceViewClicked}"  
                                                        enableScale="{!IF(service.PAServiceState.ogitems.isEndUserRebate,false,service.PAServicestate.currentRequestItem.enableScale)}"
                                                        isScalePrice="{!wrapper.isScalePrice}" scalePr="{!service.PAServicestate.currentrequestitem.scalePrices}" 
                                                        showMG5="{!AND(service.paServicestate.ogitems.OrgGroupItems.Enable_Material_Group_5__c,IF(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c!='Project Pricing',true,false))}"
                                                        showProj="{!wrapper.projectPC}">
                                
                                
                                <!-- <BB20130712> -- Ver  3.6 START Removed showStandardizedRate from the component PARequestItemRelatedList -->  
                                
                                <!-- Ver  3.6 END -->
                            </c:PARequestItemRelatedList>
                            <!-- Ver 1.7, 1.9, 3.1 END -->
                            
                        </apex:repeat>
                    </apex:outputPanel>
                    <!--  <AV20152407>-End-Code refactoring for view state error -->
                    
                    <!--Added for displaying Task records of Project Price ver 2.5  -->
                    <apex:outputPanel rendered="{!service.PAServicestate.currentRequestItem.relatedListProjectTaskRecords <> NULL && service.PAServicestate.currentRequestItem.relatedListProjectTaskRecords.size <> 0}">       
                        <apex:repeat value="{!service.PAServicestate.CurrentrequestItem.relatedListProjectTaskRecords}"  var="wrapper">                     
                            
                            <c:PAERPPricesRelatedList WrapperRecordsDisp="{!wrapper.wrapperList}"
                                                      columnsDisp="{!wrapper.keyCombinationcolumns}"
                                                      pricingRecordColumns="{!wrapper.commonColumns}"
                                                      pricingRecordSoldToColumns="{!wrapper.soldToColumns}"
                                                      typeOfSObjectList="{!wrapper.sObjectTypeName}" 
                                                      typeOfRequest="{!wrapper.priceType}"
                                                      newFieldColumns="{!wrapper.newValueColumns}"
                                                      scaledFlagColumns="{!wrapper.scaleColumns}"
                                                      actionShowFlag="false" 
                                                      showAddToRequest="true"
                                                      showCheckBox="false">
                            </c:PAERPPricesRelatedList>
                        </apex:repeat>
                    </apex:outputPanel>
                </apex:pageBlockSection>       
                <!-- <MS20140402> Added Left, Right Arrow images to enable mouseover scrolling -->     
                <img src="{!$Resource.LeftScrollArrow}" id="panLeft" class="panner" data-scroll-modifier='-1'/>
                <img src="{!$Resource.RightScrollArrow}" id="panRight" class="panner" data-scroll-modifier='1'/>   
                
            </div> 
            <!--ver 2.5 ends -->                                 
            
            
            
            <!--  Table of matching records for Project -->
            
            
            <!-- Adding this section and rendering it on click of PCL when the status is approved - 14th May 2013 Prachi -->
            <div class="priceReq">     
                <apex:pageBlockSection title="Letter Details" columns="2" rendered="{!service.PAServicestate.currentRequestItem.pclDisplayString=='PCLDisplay'}">
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="PCL Template"/>
                        <apex:outputPanel >
                            <div id="pclTemplate" class="requiredInput" style="float:left;">
                                <div class="requiredBlock" style="float:left;"></div>
                                <apex:inputText style="float:left;margin: 0px;" value="{!service.paServiceState.currentRequest.pclDisplayPopUp}"/>
                                <apex:commandLink action="{!businessComponentAction}"  >
                                    <apex:param name="desiredAction" value="selectTemplateForPcl" assignTo="{!businessaction}" />
                                    <apex:image id="theImage" url="{!$Resource.LookUpImage}" />                                             
                                    <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                    <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>                                             
                                </apex:commandLink>
                            </div>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="Customer Contact"/>
                        <apex:outputpanel >
                            <div id="custContact" class="requiredInput" style="float:left;">
                                <div class="requiredBlock" style="float:left;"></div>
                                <apex:inputText value="{!service.paServiceState.currentRequest.customerContact}"  style="float:left;margin: 0px;" maxlength="80"/>
                            </div>
                        </apex:outputpanel> 
                    </apex:pageBlockSectionItem>
                    
                    <apex:outputPanel >
                        <div id="buttons" style="float:left;text-align:center;padding:0px 0px 10px 70%;"> 
                            <apex:commandLink value="{!IF(service.PAServicestate.ogitems.isEndUserRebate,'Generate Customer Quote','Generate PCL')}"  styleClass="btn" 
                                              style="text-decoration:none" action="{!businessComponentAction}">
                                <apex:param name="desiredAction" value="generatePCL" assignTo="{!businessaction}" /> 
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />                
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>                
                            </apex:commandLink>
                            
                            <apex:commandLink value="Cancel" action="{!businessComponentAction}" styleClass="btn" 
                                              style="text-decoration:none">
                                <apex:param name="desiredAction" value="cancelPCL"
                                            assignTo="{!businessAction}"  />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />                 
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>                 
                            </apex:commandLink>  
                        </div>          
                    </apex:outputPanel>
                    
                </apex:pageBlockSection>
            </div>
            
            <!-- Ending this section and rendering it on click of PCL when the status is approved - 14th May 2013 Prachi -->
            
            <br />
            <br />
            <br />
            
            <apex:outputPanel rendered="{!service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id && service.PAServiceState.currentRequestItem.request.pricingRequest.Request_Approval_Status__c=='Submitted'}">
                
                <div style="padding-left: 130px;">
                    <apex:pageBlockSection >
                        <apex:pageBlockSectionItem >
                            Comments
                            <apex:inputTextArea rows="5" cols="160"
                                                value="{!service.PAServiceState.currentRequest.approvalWF.appRejComments}" />
                        </apex:pageBlockSectionItem>  
                    </apex:pageBlockSection>  
                </div> 
                <br />
                <br />
            </apex:outputPanel>           
            
            <apex:outputPanel >
                
                <div id="buttons" style="float:left;text-align:center;padding:0px 0px 10px 0px;">
                    <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                    <!-- PP20140514 START -->
                    <div id="buttonsNPC" style="float:left;text-align:center;">
                        <apex:commandLink value="{!$Label.Net_Pricing_Button}" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                          rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),                                       
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement'||service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Free of Charge' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                    NOT(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c == 'Massive')) && $Profile.Name != 'Viewer' 
                                                    && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                    && (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0)}" >
                            <apex:param name="newPageLabel" value="PAPricingRequest"  assignTo="{!newPageLabel}" />
                            <apex:param name="desiredAction" value="bulkNPCCal" assignTo="{!businessAction}"/>
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                        </apex:commandLink>
                    </div>
                    <!--SS20230501- Enabling/disabling view floor pricing section --> 
                    <div id="buttonsFlrRefView" style="float:left;text-align:center;">   
                        <apex:commandLink value="{!$Label.Floor_Reference_Price_View_Button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}"
                                          rendered = "{!(service.PAServiceState.currentRequest.pricingRequest.isFloorApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isFloorApplicable__c > 0 && service.paServicestate.currentRequestItem.HideFloorSec==FALSE)
                                                      || (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0 && service.paServicestate.currentRequestItem.HideFloorSec==FALSE)}">
                            <apex:param name="desiredAction" value="PriceView"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" 
                                        assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                            <apex:param name="salesvolume" value="false" assignTo="{!sVolume}"/>
                        </apex:commandLink> 
                    </div>
                    <!-- PP20140514 END -->
                    
                    <div id="buttonsProject" style="float:left;text-align:center;">
                        <apex:commandLink value="Add Project Material" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                          rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' && 
                                                    service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Submitted' &&
                                                    service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c !='Waiting for Net Price' &&
                                                    service.paServiceState.currentProjectPrice !=null &&
                                                    (service.PAServicestate.currentRequestItem.paProjectPrice.projectAction ='clone' ||
                                                    service.PAServicestate.currentRequestItem.paProjectPrice.projectSelection ='clone' ||
                                                    service.PAServicestate.currentRequestItem.paProjectPrice.dispRecordsFromSAP='IdApprovedProject' ||
                                                    service.PAServicestate.currentRequestItem.paProjectPrice.dispRecordsFromSAP='editApprovedProject')}" >
                            <apex:param name="newPageLabel" value="PANewProject"  assignTo="{!newPageLabel}"   />
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Project Selection'),'Project Selection',$Label.Price_Request)}" assignTo="{!pageName}"/>
                            <apex:param name="desiredAction" value="AddProjectMaterial"  assignTo="{!businessAction}"   />
                        </apex:commandLink> 
                    </div> 
                    <!-- Added By bala --> 
                    <!-- Ver 3.1 -- Added condition - If there are records, then only display this button-->
                    <apex:commandLink value="Add Material" action="{!businessComponentAction}" styleClass="btn"  style="text-decoration:none" 
                                      rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' &&
                                                (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id) && 
                                                service.paServiceState.currentProjectPrice !=null &&
                                                service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Submitted' &&
                                                service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c !='Waiting for Net Price' &&
                                                service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Approved' &&
                                                service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c !='Completed'  
                                                && service.PAServiceState.currentRequestItem.displayAddPricesButton }" > <!--version 1.4  -->
                        <apex:param name="newPageLabel" value="PAAddProjectRequest"  assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                        <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.Add_Project_Request),$Label.Add_Project_Request,$Label.Price_Request)}" assignTo="{!pageName}"/>
                        <apex:param name="desiredAction" value="AddMaterial" assignTo="{!businessAction}"/>
                        <apex:param name="setProjectID" value="Edit-{!service.PAServicestate.currentRequest.pricingRequest.Project_Price__c}" assignTo="{!service.PAServicestate.currentProjectPrice.selectedProjectId}"/>
                        <apex:param name="new" value="false" assignTo="{!newLink}"/>
                    </apex:commandLink> 
                    
                    
                    <!-- NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' && (service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId!=$User.Id)), -->
                    <!--  Shiva for IT Admin profile  -->
                    
                    <apex:commandLink value="{!$Label.Edit_Header_Button}"
                                      action="{!businessComponentAction}" styleClass="btn"
                                      style="text-decoration:none"
                                      rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                NOT(service.PAServiceState.currentrequest.pricingRequest.NPC_Status__c =='Waiting for Net Price'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing'))
                                                &&$Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.CreatedById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' ||service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled')  && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester') )))
                                                }"   >
                        
                        <apex:param name="desiredAction" value="EditHeader"
                                    assignTo="{!businessAction}" />
                        <apex:param name="assignId" value="{!service.PAServicestate.currentrequest.pricingRequest.Id}"
                                    assignTo="{!service.PAServicestate.currentrequest.pricingRequestId}" />
                        <apex:param name="newPageLabel" value="PANewRequest"
                                    assignTo="{!newPageLabel}" />  
                        <apex:param name="cloneflag" value="false" assignTo="{!service.PAServicestate.currentRequest.cloneFlag}"/>
                        <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                        <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.New_Request) || CONTAINS(navigationText,$Label.Price_request_clone),IF(service.PAServicestate.currentRequest.cloneFlag==true,$Label.Price_request_clone,$Label.New_Request),$Label.Price_Request)}" assignTo="{!pageName}"/>
                    </apex:commandLink> 
                    
                    <!--Ver 3.3 PS 2013-04-18 APAC Rollout-ADDING Edit Header button for Project Prices  -->
                    <apex:commandLink value="{!$Label.Edit_Header_Button}"
                                      action="{!businessComponentAction}" styleClass="btn"
                                      style="text-decoration:none"
                                      rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById!=$User.Id),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Waiting for Net Price'),
                                                (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing' ))
                                                &&$Profile.Name != 'Viewer' && service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id
                                                }"   >
                        <!--  <apex:param name="projectSelection1" value="edit" assignTo="{!service.PAServicestate.currentProjectPrice.projectSelection}"/>  --> 
                        <!-- <apex:param name="projectSelection2" value="Edit" assignTo="{!service.PAServicestate.currentProjectPrice.projectAction}"/> -->
                        
                        <apex:param name="assignId" value="Edit-{!service.PAServicestate.currentRequest.pricingRequest.Project_Price__c}"
                                    assignTo="{!service.PAServicestate.currentProjectPrice.selectedProjectId}" />
                        <apex:param name="editHeaderProject" value="editHeaderApprovedProject"
                                    assignTo="{!service.PAServicestate.currentProjectPrice.editHeaderApproved}" />
                        <apex:param name="editHeaderProject1" value="null"
                                    assignTo="{!service.PAServicestate.currentProjectPrice.dispRecordsFromSAP}" />  
                        <apex:param name="newPageLabel" value="PANewProject"
                                    assignTo="{!newPageLabel}" /> 
                        <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                        <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Project Selection'),'Project Selection',$Label.Price_Request)}" assignTo="{!pageName}"/> 
                        <apex:param name="desiredAction" value="EditProjectHeader"
                                    assignTo="{!businessAction}" />
                        
                    </apex:commandLink> 
                    <!-- ENDING Edit Header button -->
                    
                    <apex:actionRegion >
                        <!-- Ver 3.1 -- Added condition - If there are records, then only display this button-->
                        <!--  Shiva for IT Admin profile  -->
                        <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                        <!-- PP20140512 - removed displayAddPricesButton and changed navigation on click -->
                        <!--Updated by Nadeem Shaik to add request reason to Rebate request types - IS ID-00068874 -->
                        <!--SS20230501 Updated for Rebate Payout Product Shipment request type -->
                        <apex:commandLink value="{!if(CONTAINS(service.PAservicestate.currentRequest.pricingRequest.Request_Type__c,'Non Customer Specific'),$Label.Price_Record_List,$Label.Add_Prices_Button)}"
                                          action="{!businessComponentAction}" styleClass="btn"
                                          style="text-decoration:none;width:auto"   
                                          rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                    
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task'||service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate payout'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate adjustment'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Payout Product Shipment'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                    NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing')) &&$Profile.Name != 'Viewer' 
                                                    && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                    && service.PAServiceState.currentRequestItem.displayAddPricesButton}">
                            
                            
                            <apex:param name="desiredAction" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'AddPricesReqCreated',IF(service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'AddPrices','AddPricesNCS'))}"
                                        assignTo="{!businessAction}" />
                            <!--                         <TJ20140923> -->
                            <apex:param name="newPageLabel" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,'PACurrentPrices','PAAddReqItem')}"
                                        assignTo="{!newPageLabel}" />
                            <!-- <apex:param name="curPrices" value="{!IF(AND(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'),OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled')),'viewPricesOnLoad','')}" assignTo="{!service.PAServicestate.erpCustomer.currentPrices}" /> -->
                            <apex:param name="curPrices" value="{!IF(AND(AND(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific', service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent'), OR(service.PAServicestate.currentrequest.csvString==null,service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled')),'viewPricesOnLoad','')}" assignTo="{!service.PAServicestate.erpCustomer.currentPrices}" />
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' && service.PAServicestate.currentrequest.PricingRequest.Customer_Specific__c == true,IF(CONTAINS(navigationText,($Label.Current_Prices)),$Label.Current_Prices,$Label.Price_Request),IF(CONTAINS(navigationText,($Label.Add_Req_Item)),$Label.Add_Req_Item,$Label.Price_Request))}" assignTo="{!pageName}"/>
                            <apex:param name="doneButton" value="{!IF(service.PAServicestate.currentRequest.keyCombination.keyCombinationID!='--Select--'&&service.PAServicestate.currentRequest.keyCombination.keyCombinationID!=null,false,true)}" assignTo="{!done_button}"/>
                        </apex:commandLink>
                    </apex:actionRegion> 
                    
                    <!-- DW20150106 removed btn for new Pricing Task "Other Pricing Task"-->
                    <!-- PP20140512 START -->
                    <!--Updated by Nadeem Shaik to add request reason to Rebate request types - IS ID-00068874 -->
                    <!--MM20230609 Updated for Rebate Payout Product Shipment request type -->
                    <apex:commandLink value="{!$Label.Add_Materials_Button}"
                                      action="{!businessComponentAction}" styleClass="btn"
                                      style="text-decoration:none"   
                                      rendered="{!AND(NOT(service.PAServicestate.ogitems.isEndUserRebate),NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Other Pricing Task' ||service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate payout'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate adjustment'|| service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Payout Product Shipment'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c='Project Pricing')) &&$Profile.Name != 'Viewer' 
                                                && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))
                                                && service.PAServiceState.currentRequestItem.displayAddMaterialButton}">
                        
                        <!-- <TJ20140925>-->
                        <apex:param name="desiredAction" value="{!IF(service.PAServicestate.currentRequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServicestate.currentRequest.pricingRequest.Request_Type__c ==  'Customer Specific','NewMaterial',IF(Contains(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c,'Massive'),'NewPricingReqItemsoldtoSelect','NewPricingReqItem'))}" assignTo="{!businessAction}"/>
                        <apex:param name="newPageLabel" value="{!IF(Contains(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c,'Massive'),'PACustomerDetail','PAEditReqItem')}" assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing Label for Displaying Navigation Flow -->
                        <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,$Label.Edit_Req_Item),$Label.Edit_Req_Item,$Label.Price_Request)}" assignTo="{!pageName}"/>
                        <apex:param name="new" value="false" assignTo="{!newLink}"/>
                    </apex:commandLink>
                    <!-- PP20140512 END --> 
                    
                    
                    <!-- BB20140304 Added rendered condition to hide the submit button for Pricing task and Project Pricing-->
                    <apex:commandLink value="{!$Label.Submit_Button}" action="{!businessComponentAction}" styleClass="btn"
                                      style="text-decoration:none;"   
                                      rendered="{!AND(NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),OR(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id,service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id,service.paServiceState.ogItems.isBUAdmin,service.paServiceState.ogItems.salesAdminPermissionSetFlag),NOT(OR(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Permanent'&& service.paServiceState.currentrequest.pricingRequest.Attachments_on_Customer_Prices__c),service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing')))}">
                        
                        <apex:param name="desiredAction" value="submitCalculation"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                    </apex:commandLink>   
                    
                    <!-- adding approval buttons here for UI Prachi 7th feb -->
                    <apex:outputPanel rendered="{!service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id && service.PAServiceState.currentRequestItem.request.pricingRequest.Request_Approval_Status__c=='Submitted'}">
                        <div style="float:left;text-align:center;">
                            
                            <!--<IS ID-00076073> Mansi - Hide Approve button for BU admins DPP Polymers EMEA -- added rendered condition -->
                            <apex:commandLink value="{!$Label.Approve_Button}"
                                              action="{!businessComponentAction}" styleClass="btn"
                                              style="text-decoration:none;"
                                              rendered="{!NOT(service.PAServicestate.currentRequest.pricingRequest.BU__c == $Label.BU_Name && service.PAServicestate.currentRequest.pricingRequest.Current_Approver__r.profile.name == $Label.BU_Admin_Profile_Name)}" >
                                
                                <apex:param name="desiredAction" value="approve"
                                            assignTo="{!businessAction}" />
                                <apex:param name="newPageLabel" value="PAPricingRequest"
                                            assignTo="{!newPageLabel}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                            </apex:commandLink> &nbsp;&nbsp; <apex:commandLink value="{!$Label.Reject_Button}"
                                                                               action="{!businessComponentAction}" styleClass="btn" 
                                                                               style="text-decoration:none;"   >
                            
                            <apex:param name="desiredAction" value="reject"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>
                            </apex:commandLink> 
                        </div>
                        
                    </apex:outputPanel>
                    <!-- AV20140515-added sales volume button -->
                    <div id="buttonsVol" style="float:left;text-align:center;">   
                        <apex:commandLink value="{!$Label.Sales_volume_button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" 
                                          rendered = "{!service.PAServicestate.currentrequest.pricingRequest.isVolumeApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isVolumeApplicable__c > 0}">
                            <apex:param name="desiredAction" value="volumeView"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" 
                                        assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                            <apex:param name="salesvolume" value="true" assignTo="{!sVolume}"/>
                            <apex:param name="scalePrices" value="false" assignTo="{!scalePrices}"/>
                        </apex:commandLink> 
                    </div>
                    <div id="buttonsFlrRefView" style="float:left;text-align:center;">   
                        <apex:commandLink value="{!$Label.Payment_Terms_Button}" styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" 
                                          rendered = "{!service.PAServicestate.currentrequest.pricingRequest.isPaymentTermsApplicable__c != null && service.PAServicestate.currentrequest.pricingRequest.isPaymentTermsApplicable__c > 0}">
                            <apex:param name="desiredAction" value="PayTermsView"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" 
                                        assignTo="{!newPageLabel}" value="PAPricingRequestView" /> 
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(CONTAINS(navigationText,'Price Record Volume')||CONTAINS(navigationText,'Price Request View'),IF(sVolume=='true','Price Record Volume','Price Request View'),$Label.Price_Request)}" assignTo="{!pageName}"/>
                            <apex:param name="salesvolume" value="false" assignTo="{!sVolume}"/>
                            <apex:param name="scalePrices" value="false" assignTo="{!scalePrices}"/>
                        </apex:commandLink> 
                    </div>
                    <div style="float:left;text-align:center;">
                        <apex:commandLink value="{!$Label.Quit_Button}"     styleClass="btn" style="text-decoration:none;"  action="{!businessComponentAction}" onclick="return confirm('{!$Label.Quit_Request_Confirmation}');">
                            <apex:param name="desiredAction" value="Quit"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" 
                                        assignTo="{!newPageLabel}" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Approved',service.PAServicestate.currentrequest.csvString=='Submitted',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),'PAStatus',IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific','PACustomerRequests','PAMassiveAndPriceListRequests'))}" />  
                            <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                            <apex:param name="pageName" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Approved',service.PAServicestate.currentrequest.csvString=='Submitted',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.csvString+' Request'),service.PAServicestate.currentrequest.csvString+' Request',$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific',IF(CONTAINS(navigationText,$Label.Customer_Requests),$Label.Customer_Requests,$Label.Price_Request),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests'),service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests',$Label.Price_Request)))}" assignTo="{!pageName}"/> 
                        </apex:commandLink> 
                    </div>
                    <!-- VR20131023 DTT Rollout issue--> 
                    <apex:commandLink value="{!IF(service.PAServicestate.ogitems.isEndUserRebate,'Generate Customer Quote','PCL')}"   styleClass="btn" style="text-decoration:none;" action="{!businessComponentAction}" rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Approved' && (service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && (service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent' || service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Project Pricing')) && service.PAServicestate.currentRequestItem.pclDisplayString<>'PCLDisplay' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)}">
                        <apex:param name="desiredAction" value="showPCL"
                                    assignTo="{!businessAction}"  />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />                
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>                
                    </apex:commandLink> 
                    
                    <!----komathi for floor pricing button---->
                    <apex:commandLink value="Floor Pricing"
                                      action="{!businessComponentAction}" styleClass="btn"
                                      style="text-decoration:none"
                                      rendered="{!AND(service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Import',
                                                (service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Validated'||
                                                service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Recalled'||
                                                service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Draft'))}" >
                        <apex:param name="desiredAction"
                                    value="flagCheck" assignTo="{!businessaction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                    </apex:commandLink>
                    <!-- --fp ends check -->
                    
                    <!--  Shiva for IT Admin profile  -->                    
                    <apex:commandLink value="{!$Label.Abandon_Button}"   
                                      onclick="return confirm('{!$Label.Abandon_Request_Confirmation}');" action="{!businessComponentAction}" styleClass="btn" style="text-decoration:none;"
                                      rendered="{!AND(NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
                                                NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),
                                                NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),
                                                NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),
                                                NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price')) && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)|| ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled' )&& (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin')))}" >
                        <!-- Version 3.5 -->
                        <apex:param name="desiredAction" value="Abandon" assignTo="{!businessAction}" />
                        <!-- Version 3.5 -->
                        <apex:param name="newPageLabel" value="PAHome"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing Label to Display Navigation Flow Text-->
                        <!--                             <apex:param name="pageName" value="{!IF(OR(service.PAServicestate.currentrequest.csvString=='Draft',service.PAServicestate.currentrequest.csvString=='Rejected',service.PAServicestate.currentrequest.csvString=='Recalled',service.PAServicestate.currentrequest.csvString=='Pending'),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.csvString+' Request'),service.PAServicestate.currentrequest.csvString+' Request',$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Permanent',IF(CONTAINS(navigationText,$Label.Current_Prices),$Label.Current_Prices,$Label.Price_Request),IF(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c=='Customer Specific',IF(CONTAINS(navigationText,$Label.Customer_Requests),$Label.Customer_Requests,$Label.Price_Request),IF(CONTAINS(navigationText,service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests'),service.PAServicestate.currentrequest.pricingRequest.Request_Type__c+' Requests',$Label.Price_Request))))}" assignTo="{!pageName}"/> -->
                    </apex:commandLink>  
                    
                    <!--  <HL20140904> added refresh button for NPC Refresh  --> 
                    <apex:commandLink value="Refresh" action="{!service.PAServicestate.currentrequest.getUpdatedPricingRequest}" oncomplete="loadDatatables();" rerender="NetPricingStatus,apphistory,NetFLRREF,NetProjPricingStatus"
                                      style="text-decoration:none" styleClass="btn"  status="stat"
                                      rendered="{!service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c!='Approved'}" >
                        <!--   rendered="{!AND(NOT(service.PAServicestate.currentrequestitem.request.pricingRequest.f_NPC_Callout_Status__c =='Completed'),
NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),
(service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null),service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0) }" > -->
                        <!--    rendered="{!AND(NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),-->
                        <!--                 NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),  -->                                     
                        <!--             NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),-->
                        <!--             NOT(service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Rebate Agreement' || service.PAServicestate.currentrequest.pricingRequest.Spot_Type__c == 'Free of Charge'),-->
                        <!--             NOT(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),-->
                        <!--             NOT(service.PAServicestate.currentRequest.pricingRequest.Request_Type__c == 'Massive')) && $Profile.Name != 'Viewer' -->
                        <!--             && (service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || ((service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Rejected' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c=='Recalled') && (contains($Profile.Name,'BU Admin') || contains($Profile.Name,'IT Admin') || contains($Profile.Name,'Price Requester'))))-->
                        <!--             && (service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c != null && service.PAServiceState.currentRequest.pricingRequest.isNPCApplicable__c > 0)}" > -->
                    </apex:commandLink>
                    
                    <apex:commandLink value="{!$Label.Cancel_Button}" styleClass="btn" style="text-decoration:none;" 
                                      onclick="return confirm('{!$Label.Cancel_Task_for_CSR_Confirmation}');"      action="{!businessComponentAction}"
                                      rendered="{!service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task' && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved' && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || $User.Id == service.PAServiceState.currentrequest.pricingRequest.ownerId)}" >
                        <apex:param name="desiredAction" value="CancelTask"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                    
                    
                    <apex:commandLink value="{!$Label.Clone_Button}"  action="{!businessComponentAction}"   
                                      styleClass="btn" style="text-decoration:none;" rendered="{!(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled') && $Profile.Name != 'Viewer' && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || $User.Id == service.PAServiceState.currentrequest.pricingRequest.ownerId)}" >
                        <apex:param name="desiredAction" value="CloneRequest"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                    <!-- <GT20150114> -->
                    <div id="buttonsFlrRefView" style="float:left;text-align:center;"> 
                        <apex:commandLink value="Send Email" onclick="mailToOutlook()" styleClass="btn" style="text-decoration:none;" rendered="{!(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted')}" >
                        </apex:commandLink> 
                    </div>
                    
                    <!-- Ver 2.1 START -->
                    <!-- PP20140417 edited recall button render condition -->
                    <apex:commandLink value="{!$Label.Recall_Button}" styleClass="btn" style="text-decoration:none;"
                                      onclick="return confirmRecall('{!service.PAServiceState.currentrequest.pricingRequest.Id}')" action="{!businessComponentAction}"   
                                      rendered="{!OR((service.paServiceState.ogItems.isBUAdmin && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.paServiceState.ogItems.salesAdminPermissionSetFlag && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'&& service.paServiceState.ogItems.isRequester && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)),(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted' && service.paServiceState.ogItems.isBUAdmin && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id ||service.PAServiceState.currentrequest.pricingRequest.OwnerId==$User.Id)))}">     <!-- || contains($Profile.Name,'BU Admin') -->
                        <apex:param name="desiredAction" value="recall"
                                    assignTo="{!businessAction}" /> 
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                    <!-- Ver 2.1 END --> 
                    
                    <!-- VR20140221  Reassign button uncommented -->
                    <apex:commandLink value="{!IF(service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id,$Label.Delegate_Button,$Label.Reassign_Button)}"
                                      action="{!businessComponentAction}" styleClass="btn"   
                                      style="text-decoration:none;" rendered="{!(service.paServiceState.ogItems.isBUAdmin || service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id) && service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'}">
                        
                        <apex:param name="desiredAction" value="popupreassign"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                    <!--                     <TJ20150511> -->
                    <apex:commandLink value="Send To xls" action="/apex/PAExportScalePrices" styleClass="btn" style="text-decoration:none; color:#484848;text-align:center;" rendered="{!AND(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted',service.PAServicestate.currentRequestItem.relatedWrappersList.size>0,IF(service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id,true,false))}">
                        <apex:param name="Export Req Item" value="true" assignTo="{!service.PAServiceState.currentRequestItem.prItemExp}"/>
                        <apex:param name="Export Imp Req Item" value="false" assignTo="{!service.PAServiceState.currentRequestItem.impExp}"/>
                    </apex:commandLink>                   
                    <!--                     <TJ20150511> END-->
                </div> 
                
                
            </apex:outputPanel>
            
            
            <!-- Multiple approver pop-up -->
            
            <apex:outputPanel id="popUPwindow1"
                              rendered="{!service.PAServiceState.currentRequestItem.approvalWF.displayApproverList}"
                              styleClass="BackPage" />
            <apex:outputPanel id="popUPwindow"
                              rendered="{!service.PAServiceState.currentRequestItem.approvalWF.displayApproverList}"
                              styleClass="FrontPageApproverList">
                <apex:panelGrid style="float:right;">
                    <apex:commandLink action="{!businessComponentAction}"   >
                        
                        <apex:image url="{!$Resource.closeButton}" width="15" height="15"
                                    id="ima" />
                        <apex:param name="desiredAction" value="closeApproverPopup"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                </apex:panelGrid>
                
                <apex:pageBlock >
                    
                    <apex:pageBlockSection title="Approval Submission" columns="1">
                        
                        <!-- IS ID-00075712 -- MG20162112 -- rendered warning message-- start -->
                        <apex:pagemessage rendered="{!service.PAServiceState.currentRequest.approvalWF.flagstatus}" summary="NPC status conflict occurred. Please click on Cancel and resubmit the Pricing Request" severity="warning" strength="3"/>
                        <!-- IS ID-00075712 -- MG20162112 -- rendered warning message-- End -->
                        
                        <apex:pageblocksectionitem rendered="{!service.PAServiceState.ogitems.IsEndUserRebate}">
                            <apex:outputLabel value="Total Sales Reduction : " />
                            <apex:outputText value="{!service.PAServiceState.currentRequest.totalSalesReduction} {!service.PAServiceState.currentRequest.pricingRequest.Default_Currency__c}" />
                        </apex:pageblocksectionitem>
                        <!--  <apex:pageblocksectionitem rendered="{!service.PAServiceState.ogitems.IsEndUserRebate}">
<apex:outputLabel value="Total Deal Value : " />
<apex:outputText value="{!service.PAServiceState.currentRequest.pricingRequest.Total_Deal_Value__c}" />
</apex:pageblocksectionitem> -->
                        <apex:pageBlockTable value="{!service.PAServiceState.currentRequestItem.approvalWF.wrapList}" 
                                             var="key" style="width:100%;">
                            <apex:column headerValue="Level" style="border-bottom:none;" >
                                <apex:outputText value="{!key.stringMap['intList']}" />
                            </apex:column>
                            
                            <apex:column headerValue="Approver List" style="border-bottom:none;">
                                <!-- rendered="{!key.stringMap['showSelectListFlag'] == 'true'}" -->
                                <apex:selectList size="1"
                                                 value="{!key.stringMap['selectedUserId']}"
                                                 disabled="{!key.stringMap['editFlag']}"
                                                 rendered="{!key.stringMap['showAutoUser'] == 'false' && NOT(if((key.stringMap['showSelectListFlag'] == 'true'),false, true) && if(key.stringMap['approvalNotReqFlag'] == 'true', true, false))}">
                                    <!--                                    <apex:actionSupport event="onchange" />-->
                                    <apex:selectOptions value="{!key.selectApprover}" />
                                </apex:selectList>
                                <!-- rendered="{!if( (key.stringMap['showSelectListFlag'] == 'true'), false, true) && if( key.stringMap['approvalNotReqFlag'] == 'true',  false, true)}" -->
                                <apex:selectList size="1"
                                                 value="{!key.stringMap['selectedAutoUser']}"
                                                 disabled="{!key.stringMap['editFlag']}"
                                                 rendered="{!(key.stringMap['showAutoUser'] == 'true') && NOT(if((key.stringMap['showSelectListFlag'] == 'true'),false, true) && if(key.stringMap['approvalNotReqFlag'] == 'true', true, false))}">
                                    <!--                                    <apex:actionSupport event="onchange" />-->
                                    <apex:selectOptions value="{!key.selectApprover}" />
                                </apex:selectList>
                                <!-- <apex:outputText value="Auto Approve"
rendered="{!if( (key.stringMap['showSelectListFlag'] == 'true'), false, true) && if( key.stringMap['approvalNotReqFlag'] == 'true',  false, true)}" />-->
                                <apex:outputText value="Approval Not Required"
                                                 rendered="{!if((key.stringMap['showSelectListFlag'] == 'true'),false, true) && if(key.stringMap['approvalNotReqFlag'] == 'true', true, false)}" />
                            </apex:column>
                            
                        </apex:pageBlockTable>
                    </apex:pageBlockSection>
                    
                    <!-- IS ID-00075712 -- MG20162112 -- Added rendered condition for continue button-- start -->
                    <div id="multiApprover" style="float:left;text-align:center;padding:20px 0px 10px 30%;">
                        <apex:commandLink value="{!$Label.Continue_Button}"
                                          action="{!businessComponentAction}" styleClass="btn"
                                          style="text-decoration:none;" rendered="{!!service.PAServiceState.currentRequest.approvalWF.flagstatus}"  >
                            <!-- IS ID-00075712 -- MG20162112 -- Added rendered condition for continue button-- end -->       
                            
                            <apex:param name="desiredAction" value="submitContinue"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                        
                        <apex:commandLink value="{!$Label.Cancel_Button}"
                                          action="{!businessComponentAction}" styleClass="btn"
                                          style="text-decoration:none;"   >
                            
                            <apex:param name="desiredAction" value="closeApproverPopup"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                    </div>
                    
                </apex:pageBlock>
            </apex:outputPanel>
            
            
            <!-- Reassigning Popup -->
            
            <apex:outputPanel id="popUPwindowreAssign"
                              rendered="{!service.PAServiceState.currentRequestItem.approvalWF.displayReassignList}"
                              styleClass="BackPage" />
            <apex:outputPanel id="popUPwindowreAssign1"
                              rendered="{!service.PAServiceState.currentRequestItem.approvalWF.displayReassignList}"
                              styleClass="FrontPageApproverList">
                <apex:panelGrid style="float:right;">
                    <apex:commandLink action="{!businessComponentAction}"   >
                        <apex:image url="{!$Resource.closeButton}" width="15" height="15"
                                    id="ima1" />
                        <apex:param name="desiredAction" value="closereassignpopup"
                                    assignTo="{!businessAction}" />
                        <apex:param name="newPageLabel" value="PAPricingRequest"
                                    assignTo="{!newPageLabel}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                </apex:panelGrid>
                
                <apex:pageBlock >
                    <apex:pageBlockTable id="ReassignPopup" value="{!service.PAServiceState.currentRequestItem.approvalWF.wrapforReassignObjList}"
                                         var="wrapReassign" style="width:100%">
                        <apex:column headerValue="Level" >
                            <apex:outputText value="{!wrapReassign.stringMap['Level']}" />
                        </apex:column>
                        <apex:column headerValue="Approver Name" >
                            <apex:outputText value="{!wrapReassign.stringMap['userName']}" />
                            <apex:commandLink rendered="{!wrapReassign.stringMap['userName'] <> NULL && service.PAServiceState.currentRequestItem.approvalWF.request.pricingRequest.Current_Level__c == wrapReassign.stringMap['Level']}">                       
                                <c:PAUserPopulation selectedBuAtr="{!service.paServiceState.ogItems.selectedBU}"
                                                    levelAtrFromPage="{!wrapReassign.stringMap['Level']}"
                                                    levelAtrFromComp="{!service.PAServiceState.currentRequestItem.approvalWF.selectedLevel}"
                                                    userIdAtr="{!service.PAServiceState.currentRequestItem.approvalWF.selectedUserId}"
                                                    userNameAtr="{!service.PAServiceState.currentRequestItem.approvalWF.selectedUser}"
                                                    salesOrgCodeAtr="{!service.PAServicestate.currentrequest.pricingRequest.Sales_Org_Code__c}"
                                                    distCodeAtr="{!service.PAServicestate.currentrequest.pricingRequest.Dist_Channel_Code__c}"
                                                    divisionCodeAtr="{!service.PAServicestate.currentrequest.pricingRequest.Division_Code__c}"
                                                    assignedToAtr="{!IF(service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id,'delegate','reassign')}" displayAtrComp="true"
                                                    displayFiltersAtr="true" accessIdAtr="{!service.PAServiceState.currentRequestItem.approvalWF.selectedEpassID}"
                                                    userEmailID="{!service.PAServiceState.currentRequestItem.approvalWF.selectedEmailId}"/>
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                            </apex:commandLink>
                            <apex:outputText value="Approval Not Required"
                                             rendered="{!wrapReassign.stringMap['userName'] == ' '}" />
                        </apex:column>
                        <apex:column headerValue="Approver Email">
                            <apex:outputText value="{!wrapReassign.stringMap['userEmail']}" />
                        </apex:column>
                    </apex:pageBlockTable>
                    <!--<apex:outputPanel rendered="{!service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c==$User.Id}">-->
                    <apex:outputPanel >
                        <apex:OutputText value="{!IF((service.PAServiceState.currentrequest.pricingRequest.Current_Approver__c!=$User.Id),'Reassign Comments','Delegation Comments')}" style="font-weight: bold;"/><br/>
                        <apex:inputTextArea style="width:100%" rows="4" value="{!service.PAServiceState.currentRequestItem.approvalWF.delegationComments}" />
                    </apex:outputPanel>
                    <center><div id="reassignApprover" style="float:left;text-align:center;padding:10px 0px 10px 35%;">
                        <apex:commandLink value="{!$Label.Save_Button}" action="{!businessComponentAction}"
                                          styleClass="btn" style="text-decoration:none;"  onClick="reassignJS('{!service.PAServiceState.currentRequest.pricingRequest.id}', '{!service.PAServiceState.currentRequest.pricingRequest.Current_Approver__c}','{!service.PAServiceState.currentRequestItem.approvalWF.selectedUserID}');" >
                            <apex:param name="desiredAction" value="saveReassignedUser"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                        <apex:commandLink value="{!$Label.Cancel_Button}"   
                                          action="{!businessComponentAction}" styleClass="btn"
                                          style="text-decoration:none;">
                            <apex:param name="desiredAction" value="closereassignpopup"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                        </div>  
                    </center>
                </apex:pageBlock>
            </apex:outputPanel>
            
            <!-- added by sanjib for pricing task -->
            <apex:outputPanel styleClass="BackScreenImp" rendered="{!service.paServiceState.currentRequestItem.popUpFlag=='Pricingtask'}" layout="block">
            </apex:outputPanel>
            <apex:outputPanel styleClass="FrontScreenImp"
                              rendered="{!service.paServiceState.currentRequestItem.popUpFlag=='Pricingtask' }"
                              layout="block" style="text-align:left;">
                <apex:commandLink rendered="{!service.paServiceState.currentRequestItem.popUpFlag=='Pricingtask'}"   >
                    <apex:image url="{!$Resource.closeButton}" width="15" height="15" style="float:right" />
                    <apex:param value="none" assignTo="{!service.paServiceState.currentRequestItem.popUpFlag}" />
                    <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                    <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                </apex:commandLink>
                <apex:pagemessages />
                <div class="priceReq">
                    <apex:pageBlockSection title="Notes And Attachment" columns="1" collapsible="false" >
                        <apex:pageBlockSectionItem >   
                            <apex:outputText value="Select a file" />
                            <apex:inputFile value="{!service.paServiceState.currentRequestItem.document.body}" filename="{!service.paServiceState.currentRequestItem.document.name}" size="40"></apex:inputFile>
                        </apex:pageBlockSectionItem> 
                        <br/>
                        <apex:pageBlockSectionItem >   
                            <apex:outputText value="Description"/>
                            <apex:inputText maxLength="80" style="width:480px;" value="{!service.paServiceState.currentRequestItem.document.Description}"/>
                        </apex:pageBlockSectionItem>
                        <br/>
                    </apex:pageblockSection>
                </div>   
                
                <div style="text-align:center;padding:10px 0px 10px 2%;">
                    <apex:commandLink action="{!businessComponentAction}" value="Upload" styleClass="btn" style="text-decoration:none;" >
                        <apex:param name="desiredAction" value="AddtoAttachment" assignTo="{!businessaction}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                    <apex:commandLink action="{!businessComponentAction}"    value="Cancel" styleClass="btn" style="text-decoration:none;" >
                        <apex:param name="desiredAction" value="CancelAddtoAttachment" assignTo="{!businessaction}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                </div>
                
            </apex:outputPanel>
            <br></br>
        <!-- Ver 3.0 BR 2013-04-22 : rendered for APAC ROLL OUT--> 
        <apex:pageBlock rendered="{!OR(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c =='Mass Import',service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c == 'Pricing Task',(service.PAServicestate.currentrequest.pricingRequest.Request_Type__c == 'Customer Specific' && service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Permanent'&& service.paServiceState.currentrequest.pricingRequest.Attachments_on_Customer_Prices__c),service.PAServicestate.currentrequest.pricingRequest.Pricing_Request_Type__c=='Project Pricing')}">
            <div class="priceReq">
                <br/>
                <!-- <apex:outputPanel rendered="{!(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Draft' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Recalled' || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected') && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id)}"> -->
                
                <!--CC20190926 START -->
                <apex:outputPanel rendered="{!(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Draft'
                                            || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Recalled'
                                            || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected') && (service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id || service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id || service.paServiceState.ogItems.isBUAdmin)}">
                    <!--CC20190926 END -->
                    <div style="text-align:center;padding:10px 0px 10px 2%;">  
                        <apex:commandLink action="{!businessComponentAction}"    value="Attach Document" styleClass="btn" style="text-decoration:none;" >
                            <apex:param name="desiredAction" value="selectAttachment" assignTo="{!businessaction}" />
                            <apex:param name="newPageLabel" value="PaPricingRequest" assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                        <apex:commandLink action="{!businessComponentAction}"    value="Delete Document" styleClass="btn" style="text-decoration:none;" >
                            <apex:param name="desiredAction" value="deleteSelectedAttachment" assignTo="{!businessaction}" />
                            <apex:param name="newPageLabel" value="PaPricingRequest" assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>
                    </div>
                </apex:outputPanel>
                
                <apex:outputPanel >
                    <apex:pageBlockSection title="Attachment Section" columns="1">
                        
                        <apex:pageblockTable value="{!service.paServiceState.currentRequestItem.attachPAWrapperList}" var="v" columns="5">
                            <apex:column rendered="{!(service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Draft'
                                                   || service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Recalled'
                                                   || (service.PAServicestate.currentrequest.pricingRequest.Request_Approval_Status__c == 'Rejected' && service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id))}">
                                <apex:facet name="header">
                                    <apex:inputCheckbox value="{!service.paServiceState.currentRequestItem.selectAllAttachments}" id="selAllPRI">
                                        <apex:actionSupport event="onclick" action="{!businessComponentActionForRerender}" reRender="selPRI" status="stat">
                                            <apex:param name="desiredAction" value="selectAttachmentToDelete" assignTo="{!businessaction}" />
                                            <apex:param name="newPageLabel" value="PaPricingRequest" assignTo="{!newPageLabel}" />
                                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                                        </apex:actionSupport>
                                    </apex:inputCheckbox>
                                </apex:facet>
                                <apex:inputCheckbox value="{!v.isSelected}" id="selPRI"/>
                            </apex:column>       
                            
                            <apex:column headerValue="File Name"><a href="/servlet/servlet.FileDownload?file={!v.sobjectRecord['id']}" target="_blank" >{!v.sobjectRecord['Name']}</a></apex:column>
                            <apex:column headerValue="Description"><apex:outputText value="{!v.sobjectRecord['Description']}"></apex:outputText></apex:column>
                            <apex:column headerValue="Added By"><apex:outputText value="{!v.sobjectRecord['CreatedBy.Name']}"></apex:outputText></apex:column>
                            
                            <apex:column headerValue="Added On">
                                <apex:outputtext value="{0,date,dd'/'MM'/'yyyy}">
                                    <apex:param name="dat"
                                                value="{!v.sobjectRecord['CreatedDate']}" />
                                </apex:outputtext>
                            </apex:column>
                            
                        </apex:pageblockTable>
                    </apex:pageBlockSection>
                    
                    <!-- BB20140304 Added Submit button for Pricing task and Project Pricing-->
                    <div style="text-align:center;padding:10px 0px 10px 2%;">
                        <apex:commandLink value="{!$Label.Submit_Button}" action="{!businessComponentAction}" styleClass="btn"
                                          style="text-decoration:none;"   
                                          rendered="{!AND(NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Submitted'),NOT(service.PAServicestate.currentrequest.pricingRequest.NPC_Status__c=='Waiting for Net Price'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Abandoned'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Approved'),NOT(service.PAServiceState.currentrequest.pricingRequest.Request_Approval_Status__c=='Cancelled'),OR(service.PAServiceState.currentrequest.pricingRequest.createdById==$User.Id,service.PAServiceState.currentrequest.pricingRequest.ownerId==$User.Id,service.paServiceState.ogItems.isBUAdmin,service.paServiceState.ogItems.salesAdminPermissionSetFlag))}">
                            
                            <apex:param name="desiredAction" value="submitCalculation"
                                        assignTo="{!businessAction}" />
                            <apex:param name="newPageLabel" value="PAPricingRequest"
                                        assignTo="{!newPageLabel}" />
                            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                        </apex:commandLink>  
                    </div>
                </apex:outputPanel>
            </div>  
        </apex:pageBlock> 
        <!-- sanjib for pcl-->
        
        
        
    </apex:pageBlock>
    
    
    <apex:outputPanel id="backPagePCL" rendered="{!service.paServiceState.currentRequest.pclShowSelectionTable}" styleClass="BackPage"></apex:outputPanel>
    <apex:outputPanel id="popUPwindowPCL" rendered="{!service.paServiceState.currentRequest.pclShowSelectionTable}"   styleClass="FrontPagePCL">
        <apex:commandLink action="{!businessComponentAction}" >
            <apex:image url="{!$Resource.closeButton}" width="10" height="10" style="float:right;" />
            <apex:param name="desiredAction" value="Closewindow" assignTo="{!businessaction}" /> 
            <!-- <TJ20140509> Passing parameter to display navigation flow text -->
            <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
        </apex:commandLink>
        <apex:pageblock >
            <div class="details"> 
                <apex:pageblocksection title="Template Selection Screen" >
                    <apex:pageblockSectionItem >
                        <apex:outputText value="Type"></apex:outputText>
                        <apex:inputText value="{!service.paServiceState.currentRequest.email['Type']}" />
                    </apex:pageblockSectionItem>
                    
                    <apex:pageblockSectionItem >
                        <apex:outputText value="Language"></apex:outputText>
                        <apex:selectList size="1" value="{!service.paServiceState.currentRequest.email['Language']}">
                            <apex:selectOption itemValue="--Select--"></apex:selectOption>
                            <apex:selectOptions value="{!service.paServiceState.currentRequest.ListOptions}">
                            </apex:selectOptions>
                        </apex:selectList>
                    </apex:pageblockSectionItem>
                    <apex:pageblockSectionItem >
                        <apex:outputText value="Description"></apex:outputText>
                        <apex:inputText value="{!service.paServiceState.currentRequest.email['Description']}" maxlength="40" />
                    </apex:pageblockSectionItem>
                </apex:pageblocksection>
                
                
                <div style="float:left;text-align:center;padding:0px 0px 20px 0px;width:100%;"> 
                    <apex:commandLink value="Search" action="{!businessComponentAction}" styleClass="btn" style="text-decoration:none">
                        <apex:param name="desiredAction" value="searchForPCLSEARCH" assignTo="{!businessaction}" />
                        <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                        <apex:param name="pageName" value="stay" assignTo="{!pageName}"/> 
                    </apex:commandLink>
                </div>
                
                <br/>
                <div class="tablePop">    
                    <apex:pageBlockTable value="{!service.PAServiceState.currentRequest.templateWrapper}" var="temp" columns="4" style="float:left;width:100%"  
                                         rendered="{!service.paServiceState.currentRequest.csvString=='renderTable'}">
                        
                        <apex:column headerValue="Template" >
                            
                            <apex:commandLink value="{!temp.stringMap['Template']}" action="{!businessComponentAction}">
                                
                                <apex:param name="desiredAction" value="{!temp.stringMap['Template']}" assignTo="{!service.paServiceState.currentRequest.pclDisplayPopUp}" />
                                <!-- <TJ20140509> Passing parameter to display navigation flow text -->
                                <!-- <HL20141122> Passing parameter to display navigation flow text -->
                                <!--  <apex:param name="pageName" value="stay" assignTo="{!pageName}"/>  -->
                                <apex:param name="desiredAction" value="false" assignTo="{!service.paServiceState.currentRequest.pclShowSelectionTable}" /> 
                                
                            </apex:commandLink>
                        </apex:column>
                        <apex:column headerValue="Type" >
                            <apex:outputText value="{!temp.stringMap['Type']}"></apex:outputText>
                        </apex:column>
                        <apex:column headerValue="Language" >
                            <apex:outputText value="{!temp.stringMap['Language']}"></apex:outputText>
                        </apex:column>
                        
                        
                    </apex:pageBlockTable>
                </div> 
            </div>
        </apex:pageblock>                                 
    </apex:outputPanel> 
    
    
</apex:form> 

<!-- <HL20140904> added rerender id apphistory-->
<div id="appProcess" >
    <apex:relatedList list="ProcessSteps" subject="{!service.PAServicestate.currentrequest.pricingRequest.Id}" id="apphistory"></apex:relatedList>
</div>

<style type="text/css">
    
    .FrontPagePCL {
    background-color: white;
    border: 2px solid #63A4C5;
    z-index: 9999;
    left: 18%;
    right: ;
    padding: 10px;
    position: absolute;
    top: 10%; //
    margin-left: -600px;
    width: 800px;        
    }
    
    
    .FrontPageSoldToBehalf {
    left:2%;
    }
    .FrontPageApproverList {
    background-color: white;
    //border-width: 2px;
    //border-style: solid;
    border: 2px solid #63A4C5;
    z-index: 9999;
    left: 28%;
    right: 3%;
    padding: 10px;
    position: absolute;
    top: 5%; //
    margin-left: -600px;
    width: 35%;
    //  width:29%;
    }
    
    .FrontPageSoldTo {
    background-color: white;
    //border-width: 2px;
    //border-style: solid;
    border: 2px solid #63A4C5;
    z-index: 9999;
    left: 28%;
    right: 3%;
    padding: 10px;
    position: absolute;
    top: 15%; //
    margin-left: -600px;
    width: 45%;
    //  width:29%;
    }
    
    .FrontPageSoldTo1 {
    background-color: white;
    //border-width: 2px;
    //border-style: solid;
    border: 2px solid #63A4C5;
    z-index: 9999;
    left: 35%;
    right: 3%;
    padding: 10px;
    position: absolute;
    top: 15%; //
    margin-left: -600px;
    width: 40%;
    //width:38.5%;
    }
    
    .BackPage {
    background-color: #696969;
    opacity: 0.5;
    filter: alpha(opacity = 50);
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 0;
    }
    
    .spinnerCt {
    left: 50%;
    top: 35%;
    position: absolute;
    z-index: 1;
    padding: 20px 40px;
    box-shadow: 0pt 2px 5px rgb(172, 172, 172);
    border-radius: 1em 1em 1em 1em;
    border: 1px solid rgb(206, 236, 255);
    background-color: rgb(206, 236, 255);
    background-style: solid;
    }
    
    .spinner {
    padding: 10px 15px 10px 0pt;
    vertical-align: middle;
    }
    
    .spinnerCt .loadingIndicator {
    display: inline;
    font-size: 135%;
    font-weight: bold;
    }
    
    .mask {
    width: 100%;
    height: 100%;
    background-color: rgb(0, 0, 0);
    opacity: 0.45;
    filter: alpha(opacity =           45);
    position: absolute;
    z-index: 0;
    top: 0pt;
    left: 0pt;
    }
    .FrontScreenImp {
    background-color: white;
    //border-width: 2px;
    border: 2px solid #63A4C5;
    z-index: 9999;
    left: 40%;
    padding: 10px;
    position: absolute;
    width: 645px;
    margin-left: -250px;
    top: 150px;
    }
    
    .BackScreenImp {
    background-color: #696969;
    opacity: 0.5;
    filter: alpha(opacity = 50);
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 9998;
    }
    .noTableFooter
    {
    margin:0px!important;
    }
</style>


</apex:page>